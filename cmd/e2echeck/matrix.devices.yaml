# E2E validation matrix for Skyforge "netlab validate" jobs.
#
# This file is intended to be used in CI/CD (or manually) to ensure Skyforge's
# in-cluster netlab generator can successfully parse + validate topologies for
# the device types Skyforge expects to support.
#
# Usage:
#   cd skyforge-private/server
#   export SKYFORGE_E2E_MATRIX_FILE=./cmd/e2echeck/matrix.devices.yaml
#   go run ./cmd/e2echeck
#
# Notes:
# - The topology referenced below lives in the blueprints repo (source=blueprints).
# - Each test overrides the device with NETLAB_DEVICE so we can validate each
#   platform using the same minimal topology.
tests:
  - name: netlab-validate-eos
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: eos
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-eos
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: eos
        SKYFORGE_NETLAB_C9S_ENABLE_STARTUP_CONFIG_INJECTION: "true"
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-iol
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: iol
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-iol
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: iol
        SKYFORGE_NETLAB_C9S_ENABLE_STARTUP_CONFIG_INJECTION: "true"
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-iosv
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: iosv
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-iosv
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: iosv
        SKYFORGE_NETLAB_C9S_ENABLE_STARTUP_CONFIG_INJECTION: "true"
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-iosvl2
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: iosvl2
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-iosvl2
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: iosvl2
        SKYFORGE_NETLAB_C9S_ENABLE_STARTUP_CONFIG_INJECTION: "true"
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-csr
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: csr
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-csr
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: csr
        SKYFORGE_NETLAB_C9S_ENABLE_STARTUP_CONFIG_INJECTION: "true"
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-nxos
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: nxos
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-nxos
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: nxos
        SKYFORGE_NETLAB_C9S_ENABLE_STARTUP_CONFIG_INJECTION: "true"
      setOverrides: []
      timeout: 25m
      sshBanners: true
      # NXOSv (N9Kv) is a heavier image; allow extra time for boot + initial vrnetlab config.
      sshTimeout: 25m
      cleanup: true

  - name: netlab-validate-cumulus
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: cumulus
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-cumulus
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: cumulus
        SKYFORGE_NETLAB_C9S_ENABLE_STARTUP_CONFIG_INJECTION: "true"
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-sros
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: sros
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-sros
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: sros
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-asav
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: asav
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-asav
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: asav
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-fortios
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: fortios
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-fortios
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: fortios
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-cat8000v
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: cat8000v
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-cat8000v
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: cat8000v
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-arubacx
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: arubacx
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-arubacx
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: arubacx
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-dellos10
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: dellos10
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-dellos10
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: dellos10
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-vjunos-router
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: vjunos-router
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-vjunos-router
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: vjunos-router
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-vjunos-switch
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: vjunos-switch
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-vjunos-switch
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: vjunos-switch
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true

  - name: netlab-validate-vptx
    kind: netlab_validate
    netlab_validate:
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: vptx
      setOverrides: []
      timeout: 10m

  - name: netlab-deploy-vptx
    kind: netlab_deploy
    netlab_deploy:
      type: netlab-c9s
      source: blueprints
      repo: ""
      dir: netlab/_e2e/minimal
      template: topology.yml
      environment:
        NETLAB_DEVICE: vptx
      setOverrides: []
      timeout: 25m
      sshBanners: true
      sshTimeout: 12m
      cleanup: true
