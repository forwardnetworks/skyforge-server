import{a as e}from"./rolldown-runtime-DAKAggwm.js";import{$ as t,$t as n,A as r,An as i,At as a,B as o,Bt as s,C as c,Cn as l,Ct as u,D as d,Dn as f,Dt as p,E as m,En as h,Et as ee,F as te,Fn as g,Ft as _,G as ne,Gt as re,H as ie,Ht as ae,I as oe,It as se,J as ce,Jt as le,K as ue,Kt as de,L as fe,Ln as pe,Lt as me,M as he,Mn as ge,Mt as _e,N as ve,Nt as ye,O as be,On as xe,Ot as Se,P as Ce,Pn as we,Pt as Te,Q as Ee,Qt as De,R as Oe,Rt as ke,S as Ae,Sn as je,St as Me,T as Ne,Tn as Pe,Tt as Fe,U as Ie,Ut as Le,V as Re,Vt as ze,W as Be,Wt as Ve,X as He,Xt as Ue,Y as We,Yt as Ge,Z as Ke,Zt as qe,_ as Je,_n as Ye,_t as Xe,a as Ze,an as Qe,at as $e,b as et,bn as tt,bt as nt,c as rt,cn as it,ct as at,d as ot,dn as st,dt as ct,en as lt,et as ut,f as dt,fn as ft,ft as pt,g as mt,gn as ht,gt,h as _t,hn as vt,ht as yt,i as bt,in as xt,it as St,j as Ct,jn as wt,jt as Tt,k as Et,kn as Dt,kt as Ot,l as kt,ln as At,lt as jt,m as Mt,mn as Nt,mt as Pt,n as Ft,nn as It,nt as v,o as Lt,on as y,ot as Rt,p as zt,pn as Bt,pt as Vt,q as Ht,qt as Ut,r as Wt,rn as Gt,rt as Kt,s as qt,sn as Jt,st as Yt,t as Xt,tn as Zt,tt as b,u as Qt,un as $t,ut as en,v as tn,vn as nn,vt as rn,w as an,wn as on,wt as sn,x as cn,xn as ln,xt as un,y as dn,yn as fn,yt as pn,z as mn,zt as hn}from"./react-DFSg3LB0.js";import{a as gn,c as _n,d as x,f as vn,i as S,l as C,n as w,o as yn,p as bn,r as xn,s as Sn,t as Cn,u as wn}from"./tanstack-u1eiz_hl.js";import{n as Tn,r as En,t as Dn}from"./ui-utils-l2x0dF3k.js";import{i as On,n as kn,r as An,t as jn}from"./vendor-WR1pEW_p.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var Mn=e(g(),1),T=e(pe(),1);const Nn=`/api/skyforge`,Pn=`${Nn}/api`;function Fn(e){let t=e.startsWith(`/`)?e:`/`;return`${Pn}/oidc/login?next=${encodeURIComponent(t)}`}var In=class extends Error{status;bodyText;constructor(e,t,n){super(e),this.name=`ApiError`,this.status=t,this.bodyText=n}};async function E(e,t){let n=await fetch(`${Nn}${e}`,{credentials:`include`,...t,headers:{"Content-Type":`application/json`,...t?.headers??{}}});if(n.status===401||n.status===403){if(typeof window<`u`){let e=window.location.pathname+(window.location.search??``);window.location.href=Fn(e)}throw new In(`unauthorized`,n.status)}if(!n.ok){let e=await n.text().catch(()=>``);throw new In(`request failed (${n.status})`,n.status,e)}return n.status===204?{}:await n.json()}async function Ln(){return E(`/api/session`)}async function Rn(){let e=await fetch(`${Nn}/auth/logout`,{method:`POST`,credentials:`include`,headers:{"Content-Type":`application/json`},body:`{}`});if(!e.ok){let t=await e.text().catch(()=>``);throw Error(`logout failed (${e.status}): ${t}`)}}async function zn(){return E(`/api/workspaces`)}async function Bn(e,t){let n=new URLSearchParams;t?.include_read&&n.set(`include_read`,t.include_read),t?.limit&&n.set(`limit`,t.limit);let r=n.toString();return E(`/notifications/for-user/${encodeURIComponent(e)}${r?`?${r}`:``}`)}async function Vn(e){return E(`/notifications/for-user/${encodeURIComponent(e)}/read-all`,{method:`PUT`})}async function Hn(e){return E(`/notifications/single/${encodeURIComponent(e)}/read`,{method:`PUT`})}async function Un(e){return E(`/notifications/single/${encodeURIComponent(e)}`,{method:`DELETE`})}async function Wn(){return E(`/api/eve/servers`)}async function Gn(){return E(`/api/netlab/servers`)}async function Kn(e,t){let n=new URLSearchParams;t?.source&&n.set(`source`,t.source),t?.repo&&n.set(`repo`,t.repo),t?.dir&&n.set(`dir`,t.dir);let r=n.toString();return E(`/api/workspaces/${encodeURIComponent(e)}/netlab/templates${r?`?${r}`:``}`)}async function qn(e,t){let n=new URLSearchParams;t?.source&&n.set(`source`,t.source),t?.repo&&n.set(`repo`,t.repo),t?.dir&&n.set(`dir`,t.dir);let r=n.toString();return E(`/api/workspaces/${encodeURIComponent(e)}/labpp/templates${r?`?${r}`:``}`)}async function Jn(e,t){let n=new URLSearchParams;t?.source&&n.set(`source`,t.source),t?.repo&&n.set(`repo`,t.repo),t?.dir&&n.set(`dir`,t.dir);let r=n.toString();return E(`/api/workspaces/${encodeURIComponent(e)}/containerlab/templates${r?`?${r}`:``}`)}async function Yn(e,t){return E(`/api/workspaces/${encodeURIComponent(e)}/deployments`,{method:`POST`,body:JSON.stringify(t)})}async function Xn(e){return E(`/api/workspaces`,{method:`POST`,body:JSON.stringify(e)})}async function Zn(e,t){let n=new URLSearchParams;t?.prefix&&n.set(`prefix`,t.prefix),t?.limit&&n.set(`limit`,t.limit);let r=n.toString();return E(`/api/workspaces/${encodeURIComponent(e)}/artifacts${r?`?${r}`:``}`)}async function Qn(e,t){let n=new URLSearchParams({key:t});return E(`/api/workspaces/${encodeURIComponent(e)}/artifacts/download?${n.toString()}`)}async function $n(){return E(`/api/pki/root`)}async function er(){return E(`/api/pki/ssh/root`)}async function tr(){return E(`/api/pki/certs`)}async function nr(){return E(`/api/pki/ssh/certs`)}async function rr(e){return E(`/api/pki/issue`,{method:`POST`,body:JSON.stringify(e)})}async function ir(e){return E(`/api/pki/ssh/issue`,{method:`POST`,body:JSON.stringify(e)})}async function ar(e){let t=new URLSearchParams;e?.limit&&t.set(`limit`,e.limit),e?.before_id&&t.set(`before_id`,e.before_id);let n=t.toString();return E(`/api/webhooks/events${n?`?${n}`:``}`)}async function or(e){let t=new URLSearchParams;e?.limit&&t.set(`limit`,e.limit),e?.before_id&&t.set(`before_id`,e.before_id),e?.source_ip&&t.set(`source_ip`,e.source_ip),e?.unassigned&&t.set(`unassigned`,e.unassigned);let n=t.toString();return E(`/api/syslog/events${n?`?${n}`:``}`)}async function sr(e){let t=new URLSearchParams;e?.limit&&t.set(`limit`,e.limit),e?.before_id&&t.set(`before_id`,e.before_id);let n=t.toString();return E(`/api/snmp/traps/events${n?`?${n}`:``}`)}async function cr(){return E(`/api/admin/governance/summary`)}async function lr(e){let t=new URLSearchParams;e?.limit&&t.set(`limit`,e.limit);let n=t.toString();return E(`/api/admin/governance/resources${n?`?${n}`:``}`)}async function ur(e){let t=new URLSearchParams;e?.limit&&t.set(`limit`,e.limit);let n=t.toString();return E(`/api/admin/governance/costs${n?`?${n}`:``}`)}async function dr(e){let t=new URLSearchParams;e?.limit&&t.set(`limit`,e.limit);let n=t.toString();return E(`/api/admin/governance/usage${n?`?${n}`:``}`)}async function fr(){await E(`/api/admin/governance/sync`,{method:`POST`,body:`{}`})}async function pr(e,t){return E(`/api/workspaces/${encodeURIComponent(e)}/deployments/${encodeURIComponent(t)}/start`,{method:`POST`,body:`{}`})}async function mr(e,t){return E(`/api/workspaces/${encodeURIComponent(e)}/deployments/${encodeURIComponent(t)}/stop`,{method:`POST`,body:`{}`})}async function hr(e,t){return E(`/api/workspaces/${encodeURIComponent(e)}/deployments/${encodeURIComponent(t)}/destroy`,{method:`POST`,body:`{}`})}async function gr(){return E(`/api/ui/config`)}async function _r(){return E(`/status/summary`)}async function vr(){try{let e=await fetch(`${Nn}/api/session`,{credentials:`include`,headers:{"Content-Type":`application/json`}});return e.ok?await e.json():null}catch{return null}}async function yr(e){if(typeof window>`u`)return!1;let t=e.pollIntervalMs??750,n=e.timeoutMs??2*6e4;if((await vr())?.authenticated)return!0;let r=Math.max(0,Math.floor((window.screen.width-520)/2)),i=Math.max(0,Math.floor((window.screen.height-720)/2)),a=[`popup=yes`,`width=520`,`height=720`,`left=${r}`,`top=${i}`].join(`,`),o=window.open(e.loginHref,`skyforge_login`,a);if(!o)return!1;try{o.focus()}catch{}return await new Promise(e=>{let r=Date.now(),i=window.setInterval(async()=>{try{if(o.closed){window.clearInterval(i),e(!1);return}if(Date.now()-r>n){window.clearInterval(i);try{o.close()}catch{}e(!1);return}if((await vr())?.authenticated){window.clearInterval(i);try{o.close()}catch{}e(!0)}}catch{}},t)})}function D(...e){return Tn(En(e))}var O=we(),br=un,xr=ee,Sr=T.forwardRef(({className:e,inset:t,children:n,...r},i)=>(0,O.jsxs)(Fe,{ref:i,className:D(`flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent`,t&&`pl-8`,e),...r,children:[n,(0,O.jsx)(l,{className:`ml-auto h-4 w-4`})]}));Sr.displayName=Fe.displayName;var Cr=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(sn,{ref:n,className:D(`z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,e),...t}));Cr.displayName=sn.displayName;var wr=T.forwardRef(({className:e,sideOffset:t=4,...n},r)=>(0,O.jsx)(rn,{children:(0,O.jsx)(Vt,{ref:r,sideOffset:t,className:D(`z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,e),...n})}));wr.displayName=Vt.displayName;var Tr=T.forwardRef(({className:e,inset:t,...n},r)=>(0,O.jsx)(yt,{ref:r,className:D(`relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,t&&`pl-8`,e),...n}));Tr.displayName=yt.displayName;var Er=T.forwardRef(({className:e,children:t,checked:n,...r},i)=>(0,O.jsxs)(pt,{ref:i,className:D(`relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),checked:n,...r,children:[(0,O.jsx)(`span`,{className:`absolute left-2 flex h-3.5 w-3.5 items-center justify-center`,children:(0,O.jsx)(gt,{children:(0,O.jsx)(h,{className:`h-4 w-4`})})}),t]}));Er.displayName=pt.displayName;var Dr=T.forwardRef(({className:e,children:t,...n},r)=>(0,O.jsxs)(nt,{ref:r,className:D(`relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),...n,children:[(0,O.jsx)(`span`,{className:`absolute left-2 flex h-3.5 w-3.5 items-center justify-center`,children:(0,O.jsx)(gt,{children:(0,O.jsx)(fn,{className:`h-2 w-2 fill-current`})})}),t]}));Dr.displayName=nt.displayName;var Or=T.forwardRef(({className:e,inset:t,...n},r)=>(0,O.jsx)(Xe,{ref:r,className:D(`px-2 py-1.5 text-sm font-semibold`,t&&`pl-8`,e),...n}));Or.displayName=Xe.displayName;var kr=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(Me,{ref:n,className:D(`-mx-1 my-1 h-px bg-muted`,e),...t}));kr.displayName=Me.displayName;var Ar=({className:e,...t})=>(0,O.jsx)(`span`,{className:D(`ml-auto text-xs tracking-widest opacity-60`,e),...t});Ar.displayName=`DropdownMenuShortcut`;var jr=[{label:`Dashboard`,href:`/`,icon:lt},{label:`Deployments`,href:`/dashboard/deployments`,icon:$t},{label:`S3`,href:`/dashboard/s3`,icon:ze},{label:`SSOT`,href:``,icon:ht,children:[{label:`NetBox`,href:`/netbox/`,icon:le,external:!0},{label:`Nautobot`,href:`/nautobot/`,icon:le,external:!0}]},{label:`PKI`,href:`/dashboard/pki`,icon:xt},{label:`Webhooks`,href:`/webhooks`,icon:a},{label:`Syslog`,href:`/syslog`,icon:y},{label:`SNMP`,href:`/snmp`,icon:hn},{label:`Git`,href:`/git/`,icon:it,external:!0},{label:`DNS`,href:`${Pn}/dns/sso?next=/dns/`,icon:le,external:!0},{label:`Coder`,href:`/workspaces`,icon:nn,external:!0},{label:`API Testing`,href:`${Pn}/yaade/sso`,icon:Ut,external:!0},{label:`Docs`,href:`/docs/`,icon:Dt,external:!0},{label:`Settings`,href:`/admin/settings`,icon:s,adminOnly:!0},{label:`Governance`,href:`/admin/governance`,icon:hn,adminOnly:!0}];function Mr(e){let t=bn({select:e=>e.location.pathname}),[n,r]=(0,T.useState)({SSOT:!0}),i=e=>e.startsWith(`http`)?`_blank`:void 0,a=e=>e.startsWith(`http`)?`noreferrer`:void 0,o=e=>e?e===`/`?t===`/`:e.endsWith(`/`)?t.startsWith(e):t===e||t.startsWith(`${e}/`):!1,s=e=>{r(t=>({...t,[e]:!t[e]}))};return(0,O.jsx)(`nav`,{className:`grid items-start gap-2`,children:(0,O.jsxs)(`div`,{className:`space-y-2`,children:[e.collapsed?null:(0,O.jsx)(`h4`,{className:`px-3 text-xs font-semibold uppercase tracking-wide text-muted-foreground`,children:`Overview`}),(0,O.jsx)(`div`,{className:`grid gap-1`,children:jr.filter(t=>t.adminOnly?!!e.isAdmin:!0).map(t=>{let r=t.icon;if(t.children){let c=t.children.some(e=>o(e.href)),u=n[t.label];return e.collapsed?(0,O.jsxs)(br,{children:[(0,O.jsx)(xr,{asChild:!0,children:(0,O.jsx)(`button`,{className:D(`group flex items-center justify-center rounded-md px-2 py-2 text-sm font-medium transition-colors w-full`,`hover:bg-accent hover:text-accent-foreground`,c?`bg-accent text-accent-foreground`:`transparent`),title:t.label,children:(0,O.jsx)(r,{className:`h-5 w-5`})})}),(0,O.jsxs)(wr,{side:`right`,align:`start`,sideOffset:10,children:[(0,O.jsx)(Or,{children:t.label}),(0,O.jsx)(kr,{}),t.children.map(e=>(0,O.jsx)(Tr,{asChild:!0,children:e.external?(0,O.jsxs)(`a`,{href:e.href,target:i(e.href),rel:a(e.href),className:`flex items-center gap-2 cursor-pointer w-full`,children:[(0,O.jsx)(e.icon,{className:`h-4 w-4 mr-2`}),e.label]}):(0,O.jsxs)(x,{to:e.href,className:`flex items-center gap-2 cursor-pointer w-full`,children:[(0,O.jsx)(e.icon,{className:`h-4 w-4 mr-2`}),e.label]})},e.href))]})]},t.label):(0,O.jsxs)(`div`,{className:`space-y-1`,children:[(0,O.jsxs)(`button`,{onClick:()=>s(t.label),className:D(`group flex w-full items-center justify-between rounded-md px-3 py-2 text-sm font-medium transition-colors`,`hover:bg-accent hover:text-accent-foreground`,c?`text-foreground font-semibold`:`text-muted-foreground`),children:[(0,O.jsxs)(`div`,{className:`flex items-center`,children:[(0,O.jsx)(r,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:t.label})]}),u?(0,O.jsx)(Pe,{className:`h-4 w-4 opacity-50`}):(0,O.jsx)(l,{className:`h-4 w-4 opacity-50`})]}),u&&(0,O.jsx)(`div`,{className:`grid gap-1 pl-4 border-l ml-4 border-border/50`,children:t.children.map(e=>{let t=o(e.href),n=e.icon,r=D(`group flex items-center rounded-md px-3 py-2 text-sm font-medium transition-colors`,`hover:bg-accent hover:text-accent-foreground`,t?`bg-accent text-accent-foreground`:`text-muted-foreground`);return e.external?(0,O.jsxs)(`a`,{href:e.href,target:i(e.href),rel:a(e.href),className:r,children:[(0,O.jsx)(n,{className:`mr-2 h-4 w-4 opacity-70 group-hover:opacity-100`}),(0,O.jsx)(`span`,{children:e.label})]},e.href):(0,O.jsxs)(x,{to:e.href,className:r,children:[(0,O.jsx)(n,{className:`mr-2 h-4 w-4 opacity-70 group-hover:opacity-100`}),(0,O.jsx)(`span`,{children:e.label})]},e.href)})})]},t.label)}let c=D(`group flex items-center rounded-md px-3 py-2 text-sm font-medium transition-colors`,`hover:bg-accent hover:text-accent-foreground`,o(t.href)?`bg-accent`:`transparent`,e.collapsed&&`justify-center px-2`),u=D(`transition-transform duration-200 group-hover:scale-110 group-hover:text-primary`,e.collapsed?`h-5 w-5`:`mr-2 h-4 w-4`);return t.external?(0,O.jsxs)(`a`,{href:t.href,target:i(t.href),rel:a(t.href),className:c,title:e.collapsed?t.label:void 0,children:[(0,O.jsx)(r,{className:u}),e.collapsed?null:(0,O.jsx)(`span`,{children:t.label})]},t.href):(0,O.jsxs)(x,{to:t.href,className:c,title:e.collapsed?t.label:void 0,children:[(0,O.jsx)(r,{className:u}),e.collapsed?null:(0,O.jsx)(`span`,{children:t.label})]},t.href)})})]})})}var Nr=jt,Pr=at,Fr=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(Yt,{ref:n,className:D(`fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0`,e),...t}));Fr.displayName=Yt.displayName;var Ir=T.forwardRef(({className:e,children:t,...n},r)=>(0,O.jsxs)(Pr,{children:[(0,O.jsx)(Fr,{}),(0,O.jsxs)($e,{ref:r,className:D(`fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg`,e),...n,children:[t,(0,O.jsxs)(St,{className:`absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground`,children:[(0,O.jsx)(Se,{className:`h-4 w-4`}),(0,O.jsx)(`span`,{className:`sr-only`,children:`Close`})]})]})]}));Ir.displayName=$e.displayName;var Lr=({className:e,...t})=>(0,O.jsx)(`div`,{className:D(`flex flex-col space-y-1.5 text-center sm:text-left`,e),...t});Lr.displayName=`DialogHeader`;var Rr=({className:e,...t})=>(0,O.jsx)(`div`,{className:D(`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2`,e),...t});Rr.displayName=`DialogFooter`;var zr=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(en,{ref:n,className:D(`text-lg font-semibold leading-none tracking-tight`,e),...t}));zr.displayName=en.displayName;var Br=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(Rt,{ref:n,className:D(`text-sm text-muted-foreground`,e),...t}));Br.displayName=Rt.displayName;var Vr=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(v,{ref:n,className:D(`flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground`,e),...t}));Vr.displayName=v.displayName;var Hr=({children:e,...t})=>(0,O.jsx)(Nr,{...t,children:(0,O.jsx)(Ir,{className:`overflow-hidden p-0 shadow-lg`,children:(0,O.jsx)(Vr,{className:`[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5`,children:e})})}),Ur=T.forwardRef(({className:e,...t},n)=>(0,O.jsxs)(`div`,{className:`flex items-center border-b px-3`,"cmdk-input-wrapper":``,children:[(0,O.jsx)(ae,{className:`mr-2 h-4 w-4 shrink-0 opacity-50`}),(0,O.jsx)(v.Input,{ref:n,className:D(`flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50`,e),...t})]}));Ur.displayName=v.Input.displayName;var Wr=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(v.List,{ref:n,className:D(`max-h-[300px] overflow-y-auto overflow-x-hidden`,e),...t}));Wr.displayName=v.List.displayName;var Gr=T.forwardRef((e,t)=>(0,O.jsx)(v.Empty,{ref:t,className:`py-6 text-center text-sm`,...e}));Gr.displayName=v.Empty.displayName;var Kr=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(v.Group,{ref:n,className:D(`overflow-hidden p-1 text-popover-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground`,e),...t}));Kr.displayName=v.Group.displayName;var qr=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(v.Separator,{ref:n,className:D(`-mx-1 h-px bg-border`,e),...t}));qr.displayName=v.Separator.displayName;var Jr=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(v.Item,{ref:n,className:D(`relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),...t}));Jr.displayName=v.Item.displayName;var Yr=({className:e,...t})=>(0,O.jsx)(`span`,{className:D(`ml-auto text-xs tracking-widest text-muted-foreground`,e),...t});Yr.displayName=`CommandShortcut`;function Xr(){let[e,t]=T.useState(!1),n=vn();T.useEffect(()=>{let e=e=>{e.key===`k`&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),t(e=>!e))};return document.addEventListener(`keydown`,e),()=>document.removeEventListener(`keydown`,e)},[]);let r=T.useCallback(e=>{t(!1),e()},[]);return(0,O.jsxs)(Hr,{open:e,onOpenChange:t,children:[(0,O.jsx)(Ur,{placeholder:`Type a command or search...`}),(0,O.jsxs)(Wr,{children:[(0,O.jsx)(Gr,{children:`No results found.`}),(0,O.jsxs)(Kr,{heading:`Suggestions`,children:[(0,O.jsxs)(Jr,{onSelect:()=>r(()=>n({to:`/`})),children:[(0,O.jsx)(lt,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`Dashboard`})]}),(0,O.jsxs)(Jr,{onSelect:()=>r(()=>n({to:`/dashboard/deployments`})),children:[(0,O.jsx)($t,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`Deployments`})]}),(0,O.jsxs)(Jr,{onSelect:()=>r(()=>n({to:`/status`})),children:[(0,O.jsx)(ge,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`Platform Status`})]})]}),(0,O.jsx)(qr,{}),(0,O.jsxs)(Kr,{heading:`Infrastructure`,children:[(0,O.jsxs)(Jr,{onSelect:()=>r(()=>n({to:`/dashboard/s3`})),children:[(0,O.jsx)(ze,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`S3 Storage`})]}),(0,O.jsxs)(Jr,{onSelect:()=>r(()=>n({to:`/dashboard/pki`})),children:[(0,O.jsx)(xt,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`PKI Management`})]})]}),(0,O.jsx)(qr,{}),(0,O.jsxs)(Kr,{heading:`Events & Monitoring`,children:[(0,O.jsxs)(Jr,{onSelect:()=>r(()=>n({to:`/notifications`})),children:[(0,O.jsx)(i,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`Notifications`})]}),(0,O.jsxs)(Jr,{onSelect:()=>r(()=>n({to:`/webhooks`})),children:[(0,O.jsx)(a,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`Webhooks`})]}),(0,O.jsxs)(Jr,{onSelect:()=>r(()=>n({to:`/syslog`})),children:[(0,O.jsx)(y,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`Syslog`})]}),(0,O.jsxs)(Jr,{onSelect:()=>r(()=>n({to:`/snmp`})),children:[(0,O.jsx)(hn,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`SNMP Traps`})]})]})]})]})}const k={session:()=>[`session`],uiConfig:()=>[`uiConfig`],dashboardSnapshot:()=>[`dashboardSnapshot`],statusSummary:()=>[`statusSummary`],runLogs:e=>[`runLogs`,e],workspaces:()=>[`workspaces`],storageFiles:()=>[`storageFiles`],workspaceArtifacts:e=>[`workspaceArtifacts`,e],eveServers:()=>[`eveServers`],netlabServers:()=>[`netlabServers`],notifications:(e,t)=>[`notifications`,e?`1`:`0`,t??``],syslogEvents:e=>[`syslogEvents`,e??``],snmpTrapEvents:e=>[`snmpTrapEvents`,e??``],workspaceTemplates:(e,t,n,r,i)=>[`workspaceTemplates`,e,t,n,r??``,i??``],pkiRoot:()=>[`pkiRoot`],pkiCerts:()=>[`pkiCerts`],pkiSshRoot:()=>[`pkiSshRoot`],pkiSshCerts:()=>[`pkiSshCerts`],webhookEvents:e=>[`webhookEvents`,e??``],notificationSettings:()=>[`notificationSettings`],governanceSummary:()=>[`governanceSummary`],governanceResources:e=>[`governanceResources`,e??``],governanceCosts:e=>[`governanceCosts`,e??``],governanceUsage:e=>[`governanceUsage`,e??``]};var Zr=({...e})=>(0,O.jsx)(ut,{className:`toaster group`,toastOptions:{classNames:{toast:`group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg`,description:`group-[.toast]:text-muted-foreground`,actionButton:`group-[.toast]:bg-primary group-[.toast]:text-primary-foreground`,cancelButton:`group-[.toast]:bg-muted group-[.toast]:text-muted-foreground`}},...e}),A=Dn(`inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0`,{variants:{variant:{default:`bg-primary text-primary-foreground hover:bg-primary/90`,destructive:`bg-destructive text-destructive-foreground hover:bg-destructive/90`,outline:`border border-input bg-background hover:bg-accent hover:text-accent-foreground`,secondary:`bg-secondary text-secondary-foreground hover:bg-secondary/80`,ghost:`hover:bg-accent hover:text-accent-foreground`,link:`text-primary underline-offset-4 hover:underline`},size:{default:`h-10 px-4 py-2`,sm:`h-9 rounded-md px-3`,lg:`h-11 rounded-md px-8`,icon:`h-10 w-10`}},defaultVariants:{variant:`default`,size:`default`}}),j=T.forwardRef(({className:e,variant:t,size:n,...r},i)=>(0,O.jsx)(`button`,{className:D(A({variant:t,size:n,className:e})),ref:i,...r}));j.displayName=`Button`;var Qr=Dn(`rounded-lg border text-card-foreground shadow-sm`,{variants:{variant:{default:`bg-card`,elevated:`bg-card shadow-lg`,gradient:`bg-gradient-to-br from-card to-card/60`,glass:`bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60`,glow:`bg-card shadow-lg shadow-primary/10`,interactive:`bg-card hover:shadow-md transition-shadow cursor-pointer`,success:`border-green-500/50 bg-green-500/5`,warning:`border-amber-500/50 bg-amber-500/5`,danger:`border-red-500/50 bg-red-500/5`,info:`border-blue-500/50 bg-blue-500/5`,flat:`bg-card shadow-none`},size:{default:``,compact:`p-3`,comfortable:`p-6`}},defaultVariants:{variant:`default`,size:`default`}}),M=T.forwardRef(({className:e,variant:t,size:n,...r},i)=>(0,O.jsx)(`div`,{ref:i,className:D(Qr({variant:t,size:n,className:e})),...r}));M.displayName=`Card`;var N=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`div`,{ref:n,className:D(`flex flex-col space-y-1.5 p-6`,e),...t}));N.displayName=`CardHeader`;var P=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`div`,{ref:n,className:D(`text-2xl font-semibold leading-none tracking-tight`,e),...t}));P.displayName=`CardTitle`;var F=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`div`,{ref:n,className:D(`text-sm text-muted-foreground`,e),...t}));F.displayName=`CardDescription`;var I=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`div`,{ref:n,className:D(`p-6 pt-0`,e),...t}));I.displayName=`CardContent`;var $r=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`div`,{ref:n,className:D(`flex items-center p-6 pt-0`,e),...t}));$r.displayName=`CardFooter`;var ei=(0,T.createContext)({theme:`system`,setTheme:()=>null});function ti({children:e,defaultTheme:t=`system`,storageKey:n=`vite-ui-theme`}){let[r,i]=(0,T.useState)(()=>localStorage.getItem(n)||t);(0,T.useEffect)(()=>{let e=window.document.documentElement;if(e.classList.remove(`light`,`dark`),r===`system`){let t=window.matchMedia(`(prefers-color-scheme: dark)`).matches?`dark`:`light`;e.classList.add(t);return}e.classList.add(r)},[r]);let a={theme:r,setTheme:e=>{localStorage.setItem(n,e),i(e)}};return(0,O.jsx)(ei.Provider,{value:a,children:e})}const ni=()=>{let e=(0,T.useContext)(ei);if(e===void 0)throw Error(`useTheme must be used within a ThemeProvider`);return e};function ri(){let{setTheme:e}=ni();return(0,O.jsxs)(br,{children:[(0,O.jsx)(xr,{asChild:!0,children:(0,O.jsxs)(j,{variant:`outline`,size:`icon`,children:[(0,O.jsx)(se,{className:`h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0`}),(0,O.jsx)(Ge,{className:`absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100`}),(0,O.jsx)(`span`,{className:`sr-only`,children:`Toggle theme`})]})}),(0,O.jsxs)(wr,{align:`end`,children:[(0,O.jsx)(Tr,{onClick:()=>e(`light`),children:`Light`}),(0,O.jsx)(Tr,{onClick:()=>e(`dark`),children:`Dark`}),(0,O.jsx)(Tr,{onClick:()=>e(`system`),children:`System`})]})]})}var ii=jt,ai=ct,oi=at,si=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(Yt,{className:D(`fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0`,e),...t,ref:n}));si.displayName=Yt.displayName;var ci=Dn(`fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500`,{variants:{side:{top:`inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top`,bottom:`inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom`,left:`inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm`,right:`inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm`}},defaultVariants:{side:`right`}}),li=T.forwardRef(({side:e=`right`,className:t,children:n,...r},i)=>(0,O.jsxs)(oi,{children:[(0,O.jsx)(si,{}),(0,O.jsxs)($e,{ref:i,className:D(ci({side:e}),t),...r,children:[n,(0,O.jsxs)(St,{className:`absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary`,children:[(0,O.jsx)(Se,{className:`h-4 w-4`}),(0,O.jsx)(`span`,{className:`sr-only`,children:`Close`})]})]})]}));li.displayName=$e.displayName;var ui=({className:e,...t})=>(0,O.jsx)(`div`,{className:D(`flex flex-col space-y-2 text-center sm:text-left`,e),...t});ui.displayName=`SheetHeader`;var di=({className:e,...t})=>(0,O.jsx)(`div`,{className:D(`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2`,e),...t});di.displayName=`SheetFooter`;var fi=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(en,{ref:n,className:D(`text-lg font-semibold text-foreground`,e),...t}));fi.displayName=en.displayName;var pi=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(Rt,{ref:n,className:D(`text-sm text-muted-foreground`,e),...t}));pi.displayName=Rt.displayName;var mi=T.forwardRef(({...e},t)=>(0,O.jsx)(`nav`,{ref:t,"aria-label":`breadcrumb`,...e}));mi.displayName=`Breadcrumb`;var hi=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`ol`,{ref:n,className:D(`flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5`,e),...t}));hi.displayName=`BreadcrumbList`;var gi=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`li`,{ref:n,className:D(`inline-flex items-center gap-1.5`,e),...t}));gi.displayName=`BreadcrumbItem`;var _i=T.forwardRef(({asChild:e,className:t,...n},r)=>(0,O.jsx)(e?Kt:`a`,{ref:r,className:D(`transition-colors hover:text-foreground`,t),...n}));_i.displayName=`BreadcrumbLink`;var vi=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`span`,{ref:n,role:`link`,"aria-disabled":`true`,"aria-current":`page`,className:D(`font-normal text-foreground`,e),...t}));vi.displayName=`BreadcrumbPage`;var yi=({children:e,className:t,...n})=>(0,O.jsx)(`li`,{role:`presentation`,"aria-hidden":`true`,className:D(`[&>svg]:size-3.5`,t),...n,children:e??(0,O.jsx)(l,{})});yi.displayName=`BreadcrumbSeparator`;var bi=({className:e,...t})=>(0,O.jsxs)(`span`,{role:`presentation`,"aria-hidden":`true`,className:D(`flex h-9 w-9 items-center justify-center`,e),...t,children:[(0,O.jsx)(Bt,{className:`h-4 w-4`}),(0,O.jsx)(`span`,{className:`sr-only`,children:`More`})]});bi.displayName=`BreadcrumbEllipsis`;function xi(){let e=bn({select:e=>e.status===`pending`}),[t,n]=T.useState(!1);return T.useEffect(()=>{let t;return e?n(!0):t=setTimeout(()=>n(!1),500),()=>clearTimeout(t)},[e]),t?(0,O.jsx)(`div`,{className:D(`fixed top-0 left-0 z-[100] h-1 w-full bg-transparent overflow-hidden`),children:(0,O.jsx)(`div`,{className:D(`h-full w-full bg-primary/80 origin-left animate-progress`)})}):null}const L=wn()({component:Si,errorComponent:wi,notFoundComponent:Ci});function Si(){let e=bn({select:e=>e.location}),t=S(),[n,r]=(0,T.useState)(!1),[a,o]=(0,T.useState)(!1),[s,c]=(0,T.useState)(!1),[u,d]=(0,T.useState)(!1),f=w({queryKey:k.session(),queryFn:Ln,retry:!1,staleTime:3e4}),p=(0,T.useMemo)(()=>`${e.pathname}${e.searchStr??``}${e.hash??``}`,[e.pathname,e.searchStr,e.hash]),m=(0,T.useMemo)(()=>Fn(p),[p]),h=(0,T.useMemo)(()=>[`/dashboard`,`/admin`,`/webhooks`,`/syslog`,`/snmp`,`/notifications`].some(t=>e.pathname.startsWith(t)),[e.pathname]);(0,T.useEffect)(()=>{d(!1)},[e.pathname]);let ee=f.data?.displayName||f.data?.username||``,te=!!f.data?.isAdmin,g=h&&!f.isLoading&&!f.data?.authenticated;return(0,O.jsx)(ti,{defaultTheme:`dark`,storageKey:`vite-ui-theme`,children:(0,O.jsxs)(`div`,{className:`min-h-full`,children:[(0,O.jsx)(xi,{}),(0,O.jsx)(`header`,{className:`sticky top-0 z-40 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60`,style:{backgroundImage:`linear-gradient(to right, rgba(0,0,0,0.8), rgba(0,0,0,0.4)), url('/header-background.png')`,backgroundSize:`cover`,backgroundPosition:`left 50%`,height:`120px`},children:(0,O.jsxs)(`div`,{className:`mx-auto flex h-full max-w-[1600px] items-center justify-between gap-4 px-4`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-6`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,O.jsxs)(ii,{open:u,onOpenChange:d,children:[(0,O.jsx)(ai,{asChild:!0,children:(0,O.jsxs)(j,{variant:`ghost`,size:`icon`,className:`lg:hidden`,children:[(0,O.jsx)(Ue,{className:`h-5 w-5`}),(0,O.jsx)(`span`,{className:`sr-only`,children:`Toggle menu`})]})}),(0,O.jsx)(li,{side:`left`,className:`w-[240px] p-0`,children:(0,O.jsx)(`div`,{className:`px-2 py-6`,children:(0,O.jsx)(Mr,{collapsed:!1,isAdmin:te})})})]}),(0,O.jsxs)(`div`,{children:[(0,O.jsx)(`div`,{className:`text-[10px] uppercase tracking-wider text-muted-foreground leading-none`,children:`Technical Services`}),(0,O.jsx)(`div`,{className:`text-lg font-bold tracking-tight`,children:`Skyforge`})]}),(0,O.jsx)(`div`,{className:`h-8 w-px bg-border hidden md:block`}),(0,O.jsx)(`img`,{src:`/FN-logo.svg`,alt:`Forward Networks`,className:`h-6 w-auto hidden sm:block`})]}),(0,O.jsxs)(j,{variant:`outline`,className:`hidden md:flex h-9 w-64 items-center justify-start px-3 text-sm text-muted-foreground font-normal`,onClick:()=>{let e=new KeyboardEvent(`keydown`,{key:`k`,metaKey:!0,bubbles:!0});document.dispatchEvent(e)},children:[(0,O.jsx)(ae,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`Search...`}),(0,O.jsxs)(`kbd`,{className:`pointer-events-none ml-auto inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100`,children:[(0,O.jsx)(`span`,{className:`text-xs`,children:`⌘`}),`K`]})]})]}),(0,O.jsxs)(`nav`,{className:`flex items-center gap-4 text-sm`,children:[(0,O.jsx)(j,{variant:`ghost`,size:`icon`,asChild:!0,className:`text-muted-foreground hover:text-foreground`,children:(0,O.jsx)(x,{to:`/notifications`,"aria-label":`Notifications`,children:(0,O.jsx)(i,{className:`h-4 w-4`})})}),(0,O.jsx)(ri,{}),f.data?.authenticated?(0,O.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,O.jsxs)(`div`,{className:`hidden md:flex flex-col items-end`,children:[(0,O.jsx)(`span`,{className:`text-[10px] text-muted-foreground uppercase leading-none`,children:`Signed in as`}),(0,O.jsx)(`span`,{className:`text-xs font-medium leading-none mt-1`,children:ee})]}),(0,O.jsx)(j,{variant:`outline`,size:`sm`,disabled:n,onClick:async()=>{try{r(!0),await Rn(),window.location.href=`/status?signin=1`}finally{r(!1)}},children:n?`…`:`Logout`})]}):(0,O.jsx)(j,{variant:`outline`,size:`sm`,disabled:a,onClick:async()=>{try{if(o(!0),!await yr({loginHref:m})){window.location.href=m;return}await t.invalidateQueries({queryKey:k.session()})}finally{o(!1)}},children:a?`…`:`Login`})]})]})}),(0,O.jsxs)(`div`,{className:`mx-auto flex min-h-[calc(100vh-64px)] max-w-[1600px]`,children:[f.data?.authenticated&&(0,O.jsx)(`aside`,{className:D(`hidden lg:block border-r bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60`,`transition-all duration-300 ease-in-out`,s?`w-[64px]`:`w-[220px]`),children:(0,O.jsxs)(`div`,{className:`relative h-full`,children:[(0,O.jsx)(`div`,{className:D(`h-full px-4 py-4`,s&&`px-2`),children:(0,O.jsx)(Mr,{collapsed:s,isAdmin:te})}),(0,O.jsx)(`button`,{className:D(`absolute -right-3 top-4 flex h-7 w-7 items-center justify-center rounded-full border bg-background text-foreground shadow-sm`,`hover:bg-accent hover:text-accent-foreground transition-colors`),onClick:()=>c(e=>!e),"aria-label":s?`Expand navigation`:`Collapse navigation`,children:s?(0,O.jsx)(l,{className:`h-4 w-4`}):(0,O.jsx)(on,{className:`h-4 w-4`})})]})}),(0,O.jsx)(`main`,{className:`flex-1 px-4 py-6 w-full overflow-hidden flex flex-col`,children:g?(0,O.jsx)(`div`,{className:`mx-auto max-w-xl`,children:(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Login Required`}),(0,O.jsx)(F,{children:`Sign in to access this page.`})]}),(0,O.jsxs)(I,{className:`flex flex-col gap-3`,children:[(0,O.jsx)(j,{variant:`default`,disabled:a,onClick:async()=>{try{if(o(!0),!await yr({loginHref:m})){window.location.href=m;return}await t.invalidateQueries({queryKey:k.session()})}finally{o(!1)}},children:a?`…`:`Login`}),(0,O.jsx)(`a`,{className:`text-sm text-muted-foreground underline`,href:m,children:`Login with redirect instead`})]})]})}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(`div`,{className:`mb-6`,children:(0,O.jsx)(mi,{children:(0,O.jsxs)(hi,{children:[(0,O.jsx)(gi,{children:(0,O.jsx)(_i,{href:`/`,children:`Dashboard`})}),`                    `,e.pathname.split(`/`).filter(Boolean).map((e,t,n)=>{let r=`/${n.slice(0,t+1).join(`/`)}`,i=t===n.length-1;return(0,O.jsxs)(T.Fragment,{children:[(0,O.jsx)(yi,{}),(0,O.jsx)(gi,{children:i?(0,O.jsx)(vi,{className:`capitalize`,children:e}):(0,O.jsx)(_i,{href:r,className:`capitalize`,children:e})})]},r)})]})})}),(0,O.jsx)(_n,{}),(0,O.jsxs)(`footer`,{className:`mt-auto pt-12 pb-6 flex items-center justify-between text-xs text-muted-foreground border-t`,children:[(0,O.jsx)(`div`,{className:`flex gap-4`,children:(0,O.jsxs)(`span`,{children:[`Questions? Reach out at `,(0,O.jsx)(`span`,{className:`font-mono text-primary`,children:`#ask-skyforge`})]})}),(0,O.jsx)(`a`,{className:`hover:text-foreground transition-colors underline hover:no-underline`,href:`/git/skyforge/skyforge/issues/new`,target:`_blank`,rel:`noreferrer`,children:`File an issue`})]})]})})]}),(0,O.jsx)(Xr,{}),(0,O.jsx)(Zr,{})]})})}function Ci(){return(0,O.jsx)(`div`,{className:`flex flex-col items-center justify-center min-h-[50vh] space-y-4 text-center`,children:(0,O.jsxs)(M,{variant:`glass`,className:`max-w-md`,children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{className:`text-2xl`,children:`Page not found`}),(0,O.jsx)(F,{children:`This route hasn’t been migrated yet (or the URL is incorrect).`})]}),(0,O.jsxs)(I,{className:`flex flex-wrap justify-center gap-3`,children:[(0,O.jsx)(j,{variant:`default`,asChild:!0,children:(0,O.jsx)(x,{to:`/dashboard/deployments`,children:`Go to deployments`})}),(0,O.jsx)(j,{variant:`outline`,asChild:!0,children:(0,O.jsx)(x,{to:`/status`,children:`Platform status`})})]})]})})}function wi(e){let t=e.error instanceof Error?e.error.message:typeof e.error==`string`?e.error:`Unknown error`;return(0,O.jsxs)(`div`,{className:`space-y-6`,children:[(0,O.jsxs)(M,{variant:`danger`,children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Application error`}),(0,O.jsx)(F,{className:`text-red-200/80`,children:t})]}),(0,O.jsxs)(I,{className:`flex flex-wrap gap-3`,children:[(0,O.jsx)(j,{variant:`outline`,className:`border-red-500/50 bg-red-500/10 hover:bg-red-500/20 text-red-100`,onClick:()=>e.reset(),children:`Try again`}),(0,O.jsx)(j,{variant:`secondary`,asChild:!0,children:(0,O.jsx)(x,{to:`/dashboard/deployments`,children:`Go to deployments`})})]})]}),e.error instanceof Error&&e.error.stack&&(0,O.jsxs)(M,{children:[(0,O.jsx)(N,{children:(0,O.jsx)(P,{className:`text-sm`,children:`Error Stack Trace`})}),(0,O.jsx)(I,{children:(0,O.jsx)(`pre`,{className:`overflow-auto whitespace-pre-wrap text-xs text-muted-foreground p-4 rounded-md bg-muted`,children:e.error.stack})})]})]})}var Ti=new Map;function Ei(e){let t=Ti.get(e);if(t)return t.refs+=1,t;let n=new EventSource(e,{withCredentials:!0});n.onerror=()=>{};let r={url:e,es:n,refs:1};return Ti.set(e,r),r}function Di(e){let t=Ti.get(e);t&&(--t.refs,!(t.refs>0)&&(Ti.delete(e),t.es.close()))}function Oi(e,t){let n=Ei(e).es;for(let[e,r]of Object.entries(t))n.addEventListener(e,r);return{close:()=>{for(let[e,r]of Object.entries(t))n.removeEventListener(e,r);Di(e)}}}function ki(e,t){let n=S(),r=(0,T.useMemo)(()=>`${Pn}/webhooks/events/stream?limit=${encodeURIComponent(t)}`,[t]);(0,T.useEffect)(()=>{if(!e)return;let i=Oi(r,{snapshot:e=>{try{let r=JSON.parse(e.data);n.setQueryData(k.webhookEvents(t),r)}catch{}}});return()=>{i.close()}},[e,t,n,r])}var R=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`div`,{className:`relative w-full overflow-auto`,children:(0,O.jsx)(`table`,{ref:n,className:D(`w-full caption-bottom text-sm`,e),...t})}));R.displayName=`Table`;var z=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`thead`,{ref:n,className:D(`[&_tr]:border-b`,e),...t}));z.displayName=`TableHeader`;var B=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`tbody`,{ref:n,className:D(`[&_tr:last-child]:border-0`,e),...t}));B.displayName=`TableBody`;var Ai=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`tfoot`,{ref:n,className:D(`border-t bg-muted/50 font-medium [&>tr]:last:border-b-0`,e),...t}));Ai.displayName=`TableFooter`;var V=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`tr`,{ref:n,className:D(`border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted`,e),...t}));V.displayName=`TableRow`;var H=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`th`,{ref:n,className:D(`h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0`,e),...t}));H.displayName=`TableHead`;var U=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`td`,{ref:n,className:D(`p-4 align-middle [&:has([role=checkbox])]:pr-0`,e),...t}));U.displayName=`TableCell`;var ji=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`caption`,{ref:n,className:D(`mt-4 text-sm text-muted-foreground`,e),...t}));ji.displayName=`TableCaption`;function W({className:e,...t}){return(0,O.jsx)(`div`,{className:D(`animate-pulse rounded-md bg-muted`,e),...t})}function G({title:e,description:t,icon:n,action:r,className:i,...a}){return(0,O.jsx)(`div`,{className:D(`flex min-h-[400px] flex-col items-center justify-center rounded-md border border-dashed p-8 text-center animate-in fade-in zoom-in duration-300`,i),...a,children:(0,O.jsxs)(`div`,{className:`mx-auto flex max-w-[420px] flex-col items-center justify-center text-center`,children:[n&&(0,O.jsx)(`div`,{className:`flex h-20 w-20 items-center justify-center rounded-full bg-muted`,children:(0,O.jsx)(n,{className:`h-10 w-10 text-muted-foreground`})}),(0,O.jsx)(`h3`,{className:`mt-4 text-lg font-semibold`,children:e}),t&&(0,O.jsx)(`p`,{className:`mb-4 mt-2 text-sm text-muted-foreground`,children:t}),r&&(0,O.jsx)(j,{onClick:r.onClick,variant:`outline`,size:`sm`,children:r.label})]})})}const Mi=C(`/webhooks`)({component:Ni});function Ni(){ki(!0,`200`);let e=w({queryKey:k.webhookEvents(`200`),queryFn:()=>ar({limit:`200`}),staleTime:1/0}),t=e.data?.events??[];return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsx)(M,{variant:`glass`,children:(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Webhook inbox`}),(0,O.jsx)(F,{children:`Recent webhook events routed to your user.`})]})}),(0,O.jsx)(M,{children:(0,O.jsx)(I,{className:`p-0`,children:e.isLoading?(0,O.jsxs)(`div`,{className:`p-6 space-y-4`,children:[(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`})]}):e.isError?(0,O.jsx)(`div`,{className:`p-8 text-center text-destructive`,children:`Failed to load webhook events.`}):t.length===0?(0,O.jsx)(G,{icon:y,title:`No webhook events`,description:`No webhook events have been received yet.`}):(0,O.jsxs)(R,{children:[(0,O.jsx)(z,{children:(0,O.jsxs)(V,{children:[(0,O.jsx)(H,{className:`w-[180px]`,children:`Time`}),(0,O.jsx)(H,{className:`w-[140px]`,children:`Source`}),(0,O.jsx)(H,{children:`Event`}),(0,O.jsx)(H,{className:`w-[100px] text-right`,children:`ID`})]})}),(0,O.jsx)(B,{children:t.map(e=>(0,O.jsxs)(V,{children:[(0,O.jsx)(U,{className:`text-muted-foreground whitespace-nowrap text-xs`,children:e.receivedAt??``}),(0,O.jsx)(U,{children:e.sourceIp??``}),(0,O.jsxs)(U,{className:`font-medium text-sm`,children:[e.method,` `,e.path]}),(0,O.jsx)(U,{className:`font-mono text-xs text-muted-foreground text-right`,children:String(e.id)})]},String(e.id)))})]})})})]})}function Pi(e,t){let n=S(),r=(0,T.useMemo)(()=>`${Pn}/syslog/events/stream?limit=${encodeURIComponent(t)}`,[t]);(0,T.useEffect)(()=>{if(!e)return;let i=Oi(r,{snapshot:e=>{try{let r=JSON.parse(e.data);n.setQueryData(k.syslogEvents(t),r)}catch{}}});return()=>{i.close()}},[e,t,n,r])}const Fi=C(`/syslog`)({component:Ii});function Ii(){Pi(!0,`200`);let e=w({queryKey:k.syslogEvents(`200`),queryFn:()=>or({limit:`200`}),staleTime:1/0}),t=e.data?.events??[];return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsx)(M,{variant:`glass`,children:(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Syslog inbox`}),(0,O.jsx)(F,{children:`Recent syslog events mapped to your user.`})]})}),(0,O.jsx)(M,{children:(0,O.jsx)(I,{className:`p-0`,children:e.isLoading?(0,O.jsxs)(`div`,{className:`p-6 space-y-4`,children:[(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`})]}):e.isError?(0,O.jsx)(`div`,{className:`p-8 text-center text-destructive`,children:`Failed to load syslog events.`}):t.length===0?(0,O.jsx)(G,{icon:y,title:`No syslog events`,description:`No syslog messages have been received yet.`}):(0,O.jsxs)(R,{children:[(0,O.jsx)(z,{children:(0,O.jsxs)(V,{children:[(0,O.jsx)(H,{className:`w-[180px]`,children:`Time`}),(0,O.jsx)(H,{className:`w-[140px]`,children:`Source`}),(0,O.jsx)(H,{className:`w-[140px]`,children:`App`}),(0,O.jsx)(H,{children:`Message`})]})}),(0,O.jsx)(B,{children:t.map(e=>(0,O.jsxs)(V,{children:[(0,O.jsx)(U,{className:`text-muted-foreground whitespace-nowrap text-xs`,children:e.receivedAt??``}),(0,O.jsx)(U,{className:`font-mono text-xs`,children:e.sourceIp??``}),(0,O.jsx)(U,{className:`text-xs`,children:e.appName??``}),(0,O.jsx)(U,{className:`font-medium text-foreground text-sm line-clamp-2`,children:e.message??``})]},String(e.id)))})]})})})]})}function Li(e){let t=S(),n=(0,T.useMemo)(()=>`/status/summary/events`,[]);(0,T.useEffect)(()=>{if(!e)return;let r=Oi(n,{snapshot:e=>{try{let n=JSON.parse(e.data);t.setQueryData(k.statusSummary(),n)}catch{}}});return()=>{r.close()}},[e,t,n])}var Ri=Dn(`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2`,{variants:{variant:{default:`border-transparent bg-primary text-primary-foreground hover:bg-primary/80`,secondary:`border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80`,destructive:`border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80`,outline:`text-foreground`}},defaultVariants:{variant:`default`}});function K({className:e,variant:t,...n}){return(0,O.jsx)(`div`,{className:D(Ri({variant:t}),e),...n})}var zi={blue:`from-blue-500/10 via-blue-500/5 to-transparent`,green:`from-emerald-500/10 via-emerald-500/5 to-transparent`,purple:`from-purple-500/10 via-purple-500/5 to-transparent`,orange:`from-orange-500/10 via-orange-500/5 to-transparent`,red:`from-red-500/10 via-red-500/5 to-transparent`};const Bi=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`div`,{ref:n,className:D(`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4`,e),...t}));Bi.displayName=`BentoGrid`;const q=T.forwardRef(({className:e,gradient:t=`blue`,children:n,...r},i)=>(0,O.jsx)(`div`,{ref:i,className:D(`relative overflow-hidden rounded-xl border border-border bg-card p-6`,`bg-gradient-to-br`,zi[t],e),...r,children:n}));q.displayName=`BentoItem`;const Vi=T.forwardRef(({title:e,value:t,gradient:n=`blue`,icon:r,subtitle:i,trend:a,className:o},s)=>(0,O.jsxs)(q,{ref:s,gradient:n,className:o,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-2 mb-2`,children:[r&&(0,O.jsx)(`div`,{className:`text-muted-foreground`,children:r}),(0,O.jsx)(`h3`,{className:`text-sm font-medium text-muted-foreground/80`,children:e})]}),(0,O.jsxs)(`div`,{className:`flex items-end justify-between`,children:[(0,O.jsx)(`div`,{className:`text-3xl font-bold`,children:t}),a&&(0,O.jsxs)(`div`,{className:D(`flex items-center gap-1 text-sm`,a.direction===`up`?`text-emerald-500`:`text-red-500`),children:[a.direction===`up`?(0,O.jsx)(_e,{className:`w-4 h-4`}):(0,O.jsx)(ye,{className:`w-4 h-4`}),a.value,`%`]})]}),i&&(0,O.jsx)(`p`,{className:`text-xs text-muted-foreground/70 mt-2`,children:i})]}));Vi.displayName=`BentoStatCard`;const Hi=T.forwardRef(({userName:e,subtitle:t,className:n},r)=>(0,O.jsx)(q,{ref:r,gradient:`purple`,className:D(`md:col-span-2`,n),children:(0,O.jsxs)(`div`,{className:`flex items-center gap-3 mb-3`,children:[(0,O.jsx)(`div`,{className:`p-2 rounded-full bg-purple-500/10`,children:(0,O.jsx)(Tt,{className:`w-5 h-5 text-purple-500`})}),(0,O.jsxs)(`div`,{children:[(0,O.jsx)(`h2`,{className:`text-xl font-bold`,children:e?`Welcome back, ${e}`:`Welcome to Skyforge`}),t&&(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground/80`,children:t})]})]})}));Hi.displayName=`BentoWelcomeCard`;const Ui=T.forwardRef(({actions:e,className:n},r)=>(0,O.jsxs)(q,{ref:r,gradient:`blue`,className:D(`md:col-span-2`,n),children:[(0,O.jsx)(`h3`,{className:`font-semibold mb-4`,children:`Quick Actions`}),(0,O.jsx)(`div`,{className:`grid grid-cols-2 gap-3`,children:e.map((e,n)=>(0,O.jsxs)(t.button,{onClick:e.onClick,className:`flex items-center gap-2 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors text-left`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.icon,(0,O.jsx)(`span`,{className:`text-sm font-medium`,children:e.label})]},n))})]}));Ui.displayName=`BentoQuickActions`;const Wi=T.forwardRef(({servers:e,className:t},n)=>(0,O.jsxs)(q,{ref:n,gradient:`green`,className:D(`md:col-span-2`,t),children:[(0,O.jsx)(`h3`,{className:`font-semibold mb-4`,children:`Server Status`}),(0,O.jsx)(`div`,{className:`grid grid-cols-2 gap-3`,children:e.map((e,t)=>(0,O.jsxs)(`div`,{className:`flex items-center justify-between p-3 rounded-lg bg-muted/30`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,O.jsx)(`div`,{className:D(`w-2 h-2 rounded-full`,e.status===`online`?`bg-emerald-500`:e.status===`degraded`?`bg-amber-500`:`bg-red-500`)}),(0,O.jsx)(`span`,{className:`text-sm font-medium`,children:e.name})]}),e.cpu!==void 0&&(0,O.jsxs)(K,{variant:`secondary`,className:`text-xs`,children:[e.cpu,`%`]})]},t))})]}));Wi.displayName=`BentoServerStatus`;const Gi=C(`/status`)({component:Ki});function Ki(){Li(!0);let e=w({queryKey:k.statusSummary(),queryFn:_r,staleTime:1/0}),t=w({queryKey:k.uiConfig(),queryFn:gr,staleTime:1/0}),n=e.data,r=n?.checks??[],i=r.filter(e=>e.status!==`up`&&e.status!==`ok`);return(0,O.jsxs)(`div`,{className:`space-y-8 p-6`,children:[(0,O.jsxs)(Bi,{className:`gap-4`,children:[(0,O.jsx)(Hi,{subtitle:`Here's what's happening with your infrastructure today.`}),e.isLoading?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(q,{className:`h-32`,children:(0,O.jsx)(W,{className:`h-full w-full`})}),(0,O.jsx)(q,{className:`h-32`,children:(0,O.jsx)(W,{className:`h-full w-full`})}),(0,O.jsx)(q,{className:`h-32`,children:(0,O.jsx)(W,{className:`h-full w-full`})})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Vi,{title:`Services Up`,value:n?.up??0,gradient:`green`,icon:(0,O.jsx)(ln,{className:`w-5 h-5`}),trend:n?{value:100,direction:`up`}:void 0}),(0,O.jsx)(Vi,{title:`Services Down`,value:n?.down??0,gradient:n?.down?`orange`:`blue`,icon:(0,O.jsx)(ge,{className:`w-5 h-5`})}),(0,O.jsxs)(q,{gradient:`purple`,className:`relative overflow-hidden`,children:[(0,O.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,O.jsxs)(`h3`,{className:`font-semibold flex items-center gap-2`,children:[(0,O.jsx)(p,{className:`w-4 h-4`}),`Platform Status`]}),(0,O.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,O.jsxs)(`span`,{className:`relative flex h-2 w-2`,children:[(0,O.jsx)(`span`,{className:`animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75`}),(0,O.jsx)(`span`,{className:`relative inline-flex rounded-full h-2 w-2 bg-emerald-500`})]}),(0,O.jsx)(`span`,{className:`text-xs text-muted-foreground`,children:`Live`})]})]}),(0,O.jsx)(`div`,{className:`flex items-end gap-4`,children:(0,O.jsxs)(`div`,{children:[(0,O.jsx)(`span`,{className:D(`text-3xl font-bold`,n?.status===`ok`?`text-emerald-500`:n?.status===`degraded`?`text-amber-500`:`text-muted-foreground`),children:(n?.status??`checking`).toUpperCase()}),(0,O.jsx)(`p`,{className:`text-xs text-muted-foreground mt-1`,children:n?.timestamp?`Updated ${new Date(n.timestamp).toLocaleString()}`:`Checking...`})]})})]})]})]}),(0,O.jsxs)(`div`,{className:`grid gap-4 md:grid-cols-3`,children:[t.data?.externalUrl&&(0,O.jsxs)(M,{variant:`glass`,className:`border-green-500/20 bg-green-500/5`,children:[(0,O.jsx)(N,{children:(0,O.jsxs)(P,{className:`text-base flex items-center gap-2 text-green-500`,children:[(0,O.jsx)(Jt,{className:`w-4 h-4`}),`Public Access`]})}),(0,O.jsxs)(I,{className:`text-sm text-muted-foreground space-y-3`,children:[(0,O.jsx)(`p`,{children:`This environment is securely accessible via Cloudflare Tunnel.`}),(0,O.jsx)(`div`,{className:`rounded bg-background/50 p-2 border`,children:(0,O.jsx)(`a`,{className:`text-primary hover:underline break-all font-mono text-xs`,href:t.data.externalUrl,target:`_blank`,rel:`noreferrer`,children:t.data.externalUrl})})]})]}),(0,O.jsxs)(M,{variant:`glass`,children:[(0,O.jsx)(N,{children:(0,O.jsxs)(P,{className:`text-base flex items-center gap-2`,children:[(0,O.jsx)(me,{className:`w-4 h-4 text-orange-500`}),`Skyforge at a Glance`]})}),(0,O.jsxs)(I,{className:`text-sm text-muted-foreground space-y-3`,children:[(0,O.jsx)(`p`,{children:`Skyforge coordinates lab + cloud tooling into repeatable, auditable workflows for platform teams.`}),(0,O.jsxs)(`ul`,{className:`list-disc pl-4 space-y-1`,children:[(0,O.jsx)(`li`,{children:`Teams can still run tools manually; Skyforge standardizes the "happy path".`}),(0,O.jsx)(`li`,{children:`Enables consistent lab delivery across on-prem and cloud environments.`}),(0,O.jsx)(`li`,{children:`Creates shared context for collaboration, troubleshooting, and handoffs.`})]})]})]}),(0,O.jsxs)(M,{variant:`glass`,children:[(0,O.jsx)(N,{children:(0,O.jsxs)(P,{className:`text-base flex items-center gap-2`,children:[(0,O.jsx)(st,{className:`w-4 h-4 text-blue-500`}),`What You Can Do Here`]})}),(0,O.jsxs)(I,{className:`text-sm text-muted-foreground space-y-2`,children:[(0,O.jsx)(x,{className:`text-primary hover:underline`,to:`/dashboard/deployments`,children:`→ Open the dashboard`}),(0,O.jsx)(x,{className:`text-primary hover:underline`,to:`/dashboard/deployments/new`,children:`→ Create a deployment`}),(0,O.jsx)(x,{className:`text-primary hover:underline`,to:`/dashboard/s3`,children:`→ Browse artifacts (S3)`}),(0,O.jsx)(`p`,{className:`text-xs text-muted-foreground mt-3`,children:`Status is refreshed automatically via Server-Sent Events.`})]})]}),(0,O.jsxs)(M,{variant:`glass`,children:[(0,O.jsx)(N,{children:(0,O.jsxs)(P,{className:`text-base flex items-center gap-2`,children:[(0,O.jsx)(Ot,{className:`w-4 h-4 text-purple-500`}),`How Workflows Run`]})}),(0,O.jsxs)(I,{className:`text-sm text-muted-foreground space-y-2`,children:[(0,O.jsx)(`p`,{children:`Skyforge connects source control, automation, and lab capacity into one delivery loop.`}),(0,O.jsxs)(`ol`,{className:`list-decimal pl-4 space-y-1`,children:[(0,O.jsx)(`li`,{children:`Choose a blueprint (Git).`}),(0,O.jsx)(`li`,{children:`Run deployments (native task engine).`}),(0,O.jsx)(`li`,{children:`Validate on lab servers (BYOS + In-Cluster).`}),(0,O.jsx)(`li`,{children:`Store artifacts + state (Skyforge storage).`})]})]})]})]}),(0,O.jsxs)(`div`,{className:`space-y-4`,children:[(0,O.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,O.jsxs)(`h2`,{className:`text-lg font-semibold flex items-center gap-2`,children:[(0,O.jsx)(ge,{className:`w-5 h-5 text-primary`}),`Platform Health`]}),n?.timestamp&&(0,O.jsx)(K,{variant:`secondary`,className:`text-xs`,children:new Date(n.timestamp).toLocaleTimeString()})]}),(0,O.jsx)(Bi,{className:`gap-4`,children:e.isLoading?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(q,{gradient:`blue`,className:`md:col-span-2`,children:(0,O.jsx)(W,{className:`h-24 w-full`})}),(0,O.jsx)(q,{gradient:`green`,children:(0,O.jsx)(W,{className:`h-24 w-full`})}),(0,O.jsx)(q,{gradient:`purple`,children:(0,O.jsx)(W,{className:`h-24 w-full`})})]}):e.isError?(0,O.jsx)(q,{gradient:`red`,className:`md:col-span-4`,children:(0,O.jsxs)(`div`,{className:`text-destructive`,children:[`Error loading status: `,e.error.message]})}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(q,{gradient:`blue`,className:`md:col-span-2 relative overflow-hidden`,children:[(0,O.jsxs)(`div`,{className:`flex items-center justify-between mb-4`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,O.jsx)(ke,{className:`w-5 h-5`}),(0,O.jsx)(`h3`,{className:`text-base font-semibold`,children:`Platform Status`})]}),n?.status===`ok`&&(0,O.jsxs)(`span`,{className:`relative flex h-2 w-2`,children:[(0,O.jsx)(`span`,{className:`animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75`}),(0,O.jsx)(`span`,{className:`relative inline-flex rounded-full h-2 w-2 bg-emerald-500`})]})]}),(0,O.jsx)(`div`,{className:D(`text-4xl font-bold mb-2`,n?.status===`ok`?`text-emerald-500`:n?.status===`degraded`?`text-amber-500`:`text-muted-foreground`),children:(n?.status??`unknown`).toUpperCase()}),(0,O.jsxs)(`div`,{className:`text-sm text-muted-foreground/80`,children:[n?.up??0,` of `,r.length,` services operational`]}),i.length>0&&(0,O.jsxs)(`div`,{className:`mt-4 flex flex-wrap gap-2`,children:[i.slice(0,5).map(e=>(0,O.jsx)(K,{variant:`outline`,className:`text-xs border-red-500/50`,children:e.name},e.name)),i.length>5&&(0,O.jsxs)(K,{variant:`outline`,className:`text-xs border-red-500/50`,children:[`+`,i.length-5,` more`]})]})]}),(0,O.jsx)(Vi,{title:`Active Workspaces`,value:n?.workspacesTotal??0,gradient:`green`,icon:(0,O.jsx)(nn,{className:`w-5 h-5`}),subtitle:`BYOS + In-Cluster`}),(0,O.jsx)(Vi,{title:`Platform Services`,value:n?.up??0,gradient:`purple`,icon:(0,O.jsx)(ht,{className:`w-5 h-5`}),subtitle:`Running smoothly`})]})})]}),(0,O.jsxs)(`div`,{className:`space-y-4 pb-12`,children:[(0,O.jsxs)(`h2`,{className:`text-lg font-semibold flex items-center gap-2`,children:[(0,O.jsx)(me,{className:`w-5 h-5 text-primary`}),`What Skyforge Delivers`]}),(0,O.jsxs)(Bi,{className:`gap-4`,children:[(0,O.jsxs)(q,{gradient:`blue`,className:`hover-lift`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-3 mb-3`,children:[(0,O.jsx)(`div`,{className:`p-2 rounded-lg bg-blue-500/10`,children:(0,O.jsx)(st,{className:`w-5 h-5 text-blue-500`})}),(0,O.jsx)(`h3`,{className:`font-semibold`,children:`Infrastructure as Code`})]}),(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground/80`,children:`Bring your own servers or deploy in-cluster. Define topology in Git, deploy with one command, tear down cleanly.`})]}),(0,O.jsxs)(q,{gradient:`green`,className:`hover-lift`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-3 mb-3`,children:[(0,O.jsx)(`div`,{className:`p-2 rounded-lg bg-emerald-500/10`,children:(0,O.jsx)(Ot,{className:`w-5 h-5 text-emerald-500`})}),(0,O.jsx)(`h3`,{className:`font-semibold`,children:`Lab Automation`})]}),(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground/80`,children:`Repeatable network validation and demos. No manual clicking through tools—just push to Git and let workflows run.`})]}),(0,O.jsxs)(q,{gradient:`purple`,className:`hover-lift`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-3 mb-3`,children:[(0,O.jsx)(`div`,{className:`p-2 rounded-lg bg-purple-500/10`,children:(0,O.jsx)(le,{className:`w-5 h-5 text-purple-500`})}),(0,O.jsx)(`h3`,{className:`font-semibold`,children:`Team Collaboration`})]}),(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground/80`,children:`Shared blueprints, consistent environments, audit trails. Onboard new team members in hours, not weeks.`})]}),(0,O.jsxs)(q,{gradient:`orange`,className:`hover-lift md:col-span-2`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-3 mb-3`,children:[(0,O.jsx)(`div`,{className:`p-2 rounded-lg bg-orange-500/10`,children:(0,O.jsx)(p,{className:`w-5 h-5 text-orange-500`})}),(0,O.jsx)(`h3`,{className:`font-semibold`,children:`Integrated Toolchain`})]}),(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground/80 mb-3`,children:`Source control, automation database, API workspace, and browser IDE—all connected. No more context switching between disconnected tools.`}),(0,O.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[(0,O.jsx)(K,{variant:`secondary`,className:`text-xs`,children:`Git`}),(0,O.jsx)(K,{variant:`secondary`,className:`text-xs`,children:`NetBox`}),(0,O.jsx)(K,{variant:`secondary`,className:`text-xs`,children:`Nautobot`}),(0,O.jsx)(K,{variant:`secondary`,className:`text-xs`,children:`Coder`}),(0,O.jsx)(K,{variant:`secondary`,className:`text-xs`,children:`API Testing`}),(0,O.jsx)(K,{variant:`secondary`,className:`text-xs`,children:`Webhooks`})]})]})]})]})]})}function qi(e,t){let n=S(),r=(0,T.useMemo)(()=>`${Pn}/snmp/traps/events/stream?limit=${encodeURIComponent(t)}`,[t]);(0,T.useEffect)(()=>{if(!e)return;let i=Oi(r,{snapshot:e=>{try{let r=JSON.parse(e.data);n.setQueryData(k.snmpTrapEvents(t),r)}catch{}}});return()=>{i.close()}},[e,t,n,r])}const Ji=C(`/snmp`)({component:Yi});function Yi(){qi(!0,`200`);let e=w({queryKey:k.snmpTrapEvents(`200`),queryFn:()=>sr({limit:`200`}),staleTime:1/0}),t=e.data?.events??[];return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsx)(M,{variant:`glass`,children:(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`SNMP trap inbox`}),(0,O.jsx)(F,{children:`Recent SNMP trap events routed to your user.`})]})}),(0,O.jsx)(M,{children:(0,O.jsx)(I,{className:`p-0`,children:e.isLoading?(0,O.jsxs)(`div`,{className:`p-6 space-y-4`,children:[(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`})]}):e.isError?(0,O.jsx)(`div`,{className:`p-8 text-center text-destructive`,children:`Failed to load SNMP trap events.`}):t.length===0?(0,O.jsx)(G,{icon:y,title:`No trap events`,description:`No SNMP traps have been received yet.`}):(0,O.jsxs)(R,{children:[(0,O.jsx)(z,{children:(0,O.jsxs)(V,{children:[(0,O.jsx)(H,{className:`w-[180px]`,children:`Time`}),(0,O.jsx)(H,{className:`w-[140px]`,children:`Source`}),(0,O.jsx)(H,{children:`OID`}),(0,O.jsx)(H,{className:`w-[100px] text-right`,children:`ID`})]})}),(0,O.jsx)(B,{children:t.map(e=>(0,O.jsxs)(V,{children:[(0,O.jsx)(U,{className:`text-muted-foreground whitespace-nowrap text-xs`,children:e.receivedAt??``}),(0,O.jsx)(U,{className:`font-mono text-xs`,children:e.sourceIp??``}),(0,O.jsx)(U,{className:`font-medium text-foreground text-sm font-mono`,children:e.oid??``}),(0,O.jsx)(U,{className:`font-mono text-xs text-muted-foreground text-right`,children:String(e.id)})]},String(e.id)))})]})})})]})}function Xi(e,t,n){let r=S(),i=(0,T.useMemo)(()=>{let e=new URLSearchParams;return e.set(`include_read`,t?`true`:`false`),e.set(`limit`,n),`${Pn}/notifications/events?${e.toString()}`},[t,n]);(0,T.useEffect)(()=>{if(!e)return;let a=Oi(i,{snapshot:e=>{try{let i=JSON.parse(e.data);if(!i||!Array.isArray(i.notifications))return;r.setQueryData(k.notifications(t,n),i)}catch{}}});return()=>{a.close()}},[e,t,n,r,i])}function Zi({className:e,children:t,...n}){return(0,O.jsx)(`div`,{className:D(`w-full overflow-x-auto rounded-md border`,e),...n,children:(0,O.jsx)(`div`,{className:`min-w-[800px]`,children:t})})}var Qi=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(Ke,{className:D(`peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input`,e),...t,ref:n,children:(0,O.jsx)(Ee,{className:D(`pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0`)})}));Qi.displayName=Ke.displayName;var $i=Dn(`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70`),ea=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(He,{ref:n,className:D($i(),e),...t}));ea.displayName=He.displayName;var ta=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(ce,{ref:n,className:D(`peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground`,e),...t,children:(0,O.jsx)(We,{className:D(`flex items-center justify-center text-current`),children:(0,O.jsx)(h,{className:`h-4 w-4`})})}));ta.displayName=ce.displayName;var na=ne,ra=Be,ia=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(Ie,{className:D(`fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0`,e),...t,ref:n}));ia.displayName=Ie.displayName;var aa=T.forwardRef(({className:e,...t},n)=>(0,O.jsxs)(ra,{children:[(0,O.jsx)(ia,{}),(0,O.jsx)(Re,{ref:n,className:D(`fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg`,e),...t})]}));aa.displayName=Re.displayName;var oa=({className:e,...t})=>(0,O.jsx)(`div`,{className:D(`flex flex-col space-y-2 text-center sm:text-left`,e),...t});oa.displayName=`AlertDialogHeader`;var sa=({className:e,...t})=>(0,O.jsx)(`div`,{className:D(`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2`,e),...t});sa.displayName=`AlertDialogFooter`;var ca=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(ue,{ref:n,className:D(`text-lg font-semibold`,e),...t}));ca.displayName=ue.displayName;var la=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(ie,{ref:n,className:D(`text-sm text-muted-foreground`,e),...t}));la.displayName=ie.displayName;var ua=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(mn,{ref:n,className:D(A(),e),...t}));ua.displayName=mn.displayName;var da=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(o,{ref:n,className:D(A({variant:`outline`}),`mt-2 sm:mt-0`,e),...t}));da.displayName=o.displayName;const fa=C(`/notifications`)({component:pa});function pa(){let[e,t]=(0,T.useState)(!1),[n,r]=(0,T.useState)(null),[a,o]=(0,T.useState)(!1),[s,c]=(0,T.useState)(new Set),l=S(),u=w({queryKey:k.session(),queryFn:Ln,staleTime:3e4,retry:!1}).data?.username??``;Xi(!!u,e,`50`);let d=w({queryKey:k.notifications(e,`50`),enabled:!!u,queryFn:async()=>({notifications:(await Bn(u,{include_read:e?`true`:`false`,limit:`50`})).notifications??[]}),staleTime:1/0,initialData:{notifications:[]}}),f=(0,T.useMemo)(()=>d.data?.notifications??[],[d.data?.notifications]),p=(0,T.useMemo)(()=>f.filter(e=>!e.is_read).length,[f]),m=e=>{c(e?new Set(f.map(e=>String(e.id))):new Set)},ee=(e,t)=>{let n=new Set(s);t?n.add(e):n.delete(e),c(n)},te=async()=>{try{let t=Array.from(s).map(e=>Hn(e));await Promise.all(t),b.success(`${s.size} notifications marked as read`),c(new Set),await l.invalidateQueries({queryKey:k.notifications(e,`50`)})}catch(e){b.error(`Failed to mark selection as read`,{description:e.message})}},g=async()=>{try{let t=Array.from(s).map(e=>Un(e));await Promise.all(t),b.success(`${s.size} notifications deleted`),c(new Set),await l.invalidateQueries({queryKey:k.notifications(e,`50`)})}catch(e){b.error(`Failed to delete selection`,{description:e.message})}},_=async()=>{try{await Vn(u),b.success(`All notifications marked as read`)}catch(e){b.error(`Failed to mark notifications as read`,{description:e.message})}},ne=async e=>{try{await Hn(e),b.success(`Notification marked as read`)}catch(e){b.error(`Failed to mark notification as read`,{description:e.message})}};return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsx)(M,{variant:`glass`,children:(0,O.jsx)(N,{children:(0,O.jsxs)(`div`,{className:`flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,O.jsx)(`div`,{className:`p-2 rounded-full bg-primary/10`,children:(0,O.jsx)(i,{className:`h-6 w-6 text-primary`})}),(0,O.jsxs)(`div`,{children:[(0,O.jsx)(P,{children:`Notifications`}),(0,O.jsx)(F,{children:`Stay updated with platform events and system alerts.`})]})]}),(0,O.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,O.jsx)(Qi,{id:`show-read`,checked:e,onCheckedChange:t}),(0,O.jsx)(ea,{htmlFor:`show-read`,className:`cursor-pointer`,children:`Show read`})]}),(0,O.jsx)(j,{variant:`outline`,size:`sm`,disabled:!u||p===0,onClick:_,children:`Mark all read`})]})]})})}),s.size>0&&(0,O.jsxs)(`div`,{className:`fixed bottom-6 left-1/2 -translate-x-1/2 z-50 flex items-center gap-4 rounded-full border bg-background/95 p-2 px-6 shadow-xl backdrop-blur animate-in slide-in-from-bottom-10 fade-in duration-300`,children:[(0,O.jsxs)(`span`,{className:`text-sm font-medium`,children:[s.size,` selected`]}),(0,O.jsx)(`div`,{className:`h-4 w-px bg-border`}),(0,O.jsxs)(j,{size:`sm`,variant:`ghost`,onClick:te,children:[(0,O.jsx)(h,{className:`mr-2 h-4 w-4`}),`Mark read`]}),(0,O.jsxs)(j,{size:`sm`,variant:`destructive`,onClick:g,children:[(0,O.jsx)(Te,{className:`mr-2 h-4 w-4`}),`Delete`]}),(0,O.jsx)(j,{size:`sm`,variant:`ghost`,onClick:()=>c(new Set),children:`Cancel`})]}),(0,O.jsx)(M,{children:(0,O.jsx)(I,{className:`p-0`,children:d.isLoading?(0,O.jsxs)(`div`,{className:`p-6 space-y-4`,children:[(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`})]}):d.isError?(0,O.jsx)(`div`,{className:`p-8 text-center text-destructive`,children:`Failed to load notifications.`}):f.length===0?(0,O.jsx)(G,{icon:y,title:`No notifications`,description:e?`You don't have any notifications at the moment.`:`You've read all your notifications!`}):(0,O.jsx)(Zi,{className:`border-none`,children:(0,O.jsxs)(R,{children:[(0,O.jsx)(z,{children:(0,O.jsxs)(V,{children:[(0,O.jsx)(H,{className:`w-[50px]`,children:(0,O.jsx)(ta,{checked:f.length>0&&s.size===f.length,onCheckedChange:m})}),(0,O.jsx)(H,{className:`w-[180px]`,children:`Time`}),(0,O.jsx)(H,{children:`Title & Message`}),(0,O.jsx)(H,{className:`w-[120px]`,children:`Category`}),(0,O.jsx)(H,{className:`w-[80px] text-right`,children:`Actions`})]})}),(0,O.jsx)(B,{children:f.map(e=>{let t=String(e.id),n=s.has(t);return(0,O.jsxs)(V,{className:e.is_read?`opacity-60 grayscale-[0.5]`:``,"data-state":n?`selected`:void 0,children:[(0,O.jsx)(U,{children:(0,O.jsx)(ta,{checked:n,onCheckedChange:e=>ee(t,e)})}),(0,O.jsx)(U,{className:`text-muted-foreground text-xs whitespace-nowrap`,children:e.created_at??``}),(0,O.jsxs)(U,{children:[(0,O.jsx)(`div`,{className:`font-medium text-sm`,children:e.title??``}),e.message?(0,O.jsx)(`div`,{className:`mt-1 text-xs text-muted-foreground line-clamp-2`,children:e.message}):null]}),(0,O.jsx)(U,{children:(0,O.jsx)(`span`,{className:`inline-flex items-center rounded-full bg-muted px-2 py-0.5 text-[10px] font-medium text-muted-foreground capitalize`,children:e.category??`System`})}),(0,O.jsx)(U,{className:`text-right`,children:(0,O.jsxs)(br,{children:[(0,O.jsx)(xr,{asChild:!0,children:(0,O.jsxs)(j,{variant:`ghost`,size:`icon`,className:`h-8 w-8`,children:[(0,O.jsx)(Bt,{className:`h-4 w-4`}),(0,O.jsx)(`span`,{className:`sr-only`,children:`Open menu`})]})}),(0,O.jsxs)(wr,{align:`end`,children:[!e.is_read&&(0,O.jsxs)(Tr,{onClick:()=>ne(t),children:[(0,O.jsx)(h,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`Mark as read`})]}),(0,O.jsxs)(Tr,{className:`text-destructive focus:text-destructive`,onClick:()=>{r(t),o(!0)},children:[(0,O.jsx)(Te,{className:`mr-2 h-4 w-4`}),(0,O.jsx)(`span`,{children:`Delete`})]})]})]})})]},t)})})]})})})}),(0,O.jsx)(na,{open:a,onOpenChange:o,children:(0,O.jsxs)(aa,{children:[(0,O.jsxs)(oa,{children:[(0,O.jsx)(ca,{children:`Delete notification?`}),(0,O.jsx)(la,{children:`This action cannot be undone.`})]}),(0,O.jsxs)(sa,{children:[(0,O.jsx)(da,{children:`Cancel`}),(0,O.jsx)(ua,{onClick:async()=>{if(n)try{await Un(n),b.success(`Notification deleted`),o(!1),r(null)}catch(e){b.error(`Failed to delete notification`,{description:e.message})}},className:A({variant:`destructive`}),children:`Delete`})]})]})})]})}var ma=T.forwardRef(({className:e,type:t,...n},r)=>(0,O.jsx)(`input`,{type:t,className:D(`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,e),ref:r,...n}));ma.displayName=`Input`;var J=he,Y=fe,X=T.forwardRef(({className:e,children:t,...n},r)=>(0,O.jsxs)(oe,{ref:r,className:D(`flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1`,e),...n,children:[t,(0,O.jsx)(m,{asChild:!0,children:(0,O.jsx)(Pe,{className:`h-4 w-4 opacity-50`})})]}));X.displayName=oe.displayName;var ha=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(Ce,{ref:n,className:D(`flex cursor-default items-center justify-center py-1`,e),...t,children:(0,O.jsx)(je,{className:`h-4 w-4`})}));ha.displayName=Ce.displayName;var ga=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(ve,{ref:n,className:D(`flex cursor-default items-center justify-center py-1`,e),...t,children:(0,O.jsx)(Pe,{className:`h-4 w-4`})}));ga.displayName=ve.displayName;var Z=T.forwardRef(({className:e,children:t,position:n=`popper`,...r},i)=>(0,O.jsx)(Ct,{children:(0,O.jsxs)(an,{ref:i,className:D(`relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,n===`popper`&&`data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1`,e),position:n,...r,children:[(0,O.jsx)(ha,{}),(0,O.jsx)(Oe,{className:D(`p-1`,n===`popper`&&`h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]`),children:t}),(0,O.jsx)(ga,{})]})}));Z.displayName=an.displayName;var _a=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(r,{ref:n,className:D(`py-1.5 pl-8 pr-2 text-sm font-semibold`,e),...t}));_a.displayName=r.displayName;var Q=T.forwardRef(({className:e,children:t,...n},r)=>(0,O.jsxs)(d,{ref:r,className:D(`relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50`,e),...n,children:[(0,O.jsx)(`span`,{className:`absolute left-2 flex h-3.5 w-3.5 items-center justify-center`,children:(0,O.jsx)(be,{children:(0,O.jsx)(h,{className:`h-4 w-4`})})}),(0,O.jsx)(Et,{children:t})]}));Q.displayName=d.displayName;var va=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(te,{ref:n,className:D(`-mx-1 my-1 h-px bg-muted`,e),...t}));va.displayName=te.displayName;var ya=Ae,ba=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(cn,{ref:n,className:D(`inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground`,e),...t}));ba.displayName=cn.displayName;var xa=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(c,{ref:n,className:D(`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm`,e),...t}));xa.displayName=c.displayName;var Sa=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(et,{ref:n,className:D(`mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2`,e),...t}));Sa.displayName=et.displayName;const Ca=C(`/design`)({component:wa});function wa(){return(0,O.jsxs)(`div`,{className:`space-y-10 p-6 pb-20`,children:[(0,O.jsxs)(`div`,{className:`space-y-2`,children:[(0,O.jsx)(`h1`,{className:`text-3xl font-bold tracking-tight`,children:`Design System`}),(0,O.jsx)(`p`,{className:`text-muted-foreground`,children:`A catalog of all reusable UI components available in the portal.`})]}),(0,O.jsxs)(`section`,{className:`space-y-4`,children:[(0,O.jsx)(`h2`,{className:`text-xl font-semibold`,children:`Buttons`}),(0,O.jsxs)(`div`,{className:`flex flex-wrap gap-4`,children:[(0,O.jsx)(j,{variant:`default`,children:`Default`}),(0,O.jsx)(j,{variant:`secondary`,children:`Secondary`}),(0,O.jsx)(j,{variant:`destructive`,children:`Destructive`}),(0,O.jsx)(j,{variant:`outline`,children:`Outline`}),(0,O.jsx)(j,{variant:`ghost`,children:`Ghost`}),(0,O.jsx)(j,{variant:`link`,children:`Link`}),(0,O.jsx)(j,{size:`sm`,children:`Small`}),(0,O.jsx)(j,{size:`lg`,children:`Large`}),(0,O.jsx)(j,{size:`icon`,children:(0,O.jsx)(s,{className:`h-4 w-4`})}),(0,O.jsx)(j,{disabled:!0,children:`Disabled`}),(0,O.jsxs)(j,{variant:`outline`,className:`gap-2`,children:[(0,O.jsx)(qe,{className:`h-4 w-4`}),` With Icon`]})]})]}),(0,O.jsxs)(`section`,{className:`space-y-4`,children:[(0,O.jsx)(`h2`,{className:`text-xl font-semibold`,children:`Badges`}),(0,O.jsxs)(`div`,{className:`flex flex-wrap gap-4`,children:[(0,O.jsx)(K,{children:`Default`}),(0,O.jsx)(K,{variant:`secondary`,children:`Secondary`}),(0,O.jsx)(K,{variant:`outline`,children:`Outline`}),(0,O.jsx)(K,{variant:`destructive`,children:`Destructive`})]})]}),(0,O.jsxs)(`section`,{className:`space-y-4`,children:[(0,O.jsx)(`h2`,{className:`text-xl font-semibold`,children:`Cards`}),(0,O.jsxs)(`div`,{className:`grid gap-4 md:grid-cols-2 lg:grid-cols-4`,children:[(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Default Card`}),(0,O.jsx)(F,{children:`Standard container style`})]}),(0,O.jsx)(I,{children:`Content goes here`})]}),(0,O.jsxs)(M,{variant:`glass`,children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Glass Card`}),(0,O.jsx)(F,{children:`Backdrop blur effect`})]}),(0,O.jsx)(I,{children:`Popular for headers`})]}),(0,O.jsxs)(M,{variant:`flat`,children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Flat Card`}),(0,O.jsx)(F,{children:`No shadow, border only`})]}),(0,O.jsx)(I,{children:`Clean look`})]}),(0,O.jsxs)(M,{variant:`danger`,children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Danger Card`}),(0,O.jsx)(F,{children:`For error states`})]}),(0,O.jsx)(I,{className:`text-sm`,children:`Something went wrong`})]})]})]}),(0,O.jsxs)(`section`,{className:`space-y-4`,children:[(0,O.jsx)(`h2`,{className:`text-xl font-semibold`,children:`Bento Grid`}),(0,O.jsxs)(Bi,{children:[(0,O.jsx)(Vi,{title:`Total Revenue`,value:`$45,231.89`,icon:(0,O.jsx)(Ye,{className:`h-4 w-4`}),gradient:`blue`}),(0,O.jsx)(Vi,{title:`Active Users`,value:`+2350`,icon:(0,O.jsx)(Tt,{className:`h-4 w-4`}),gradient:`green`}),(0,O.jsx)(q,{gradient:`purple`,className:`md:col-span-2`,children:(0,O.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,O.jsx)(`div`,{className:`p-2 bg-background/20 rounded-full`,children:(0,O.jsx)(nn,{className:`h-6 w-6`})}),(0,O.jsxs)(`div`,{children:[(0,O.jsx)(`h3`,{className:`font-semibold text-lg`,children:`Cloud Infrastructure`}),(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground/80`,children:`Manage your cloud resources and deployments from a single dashboard.`})]})]})})]})]}),(0,O.jsxs)(`section`,{className:`space-y-4`,children:[(0,O.jsx)(`h2`,{className:`text-xl font-semibold`,children:`Form Inputs`}),(0,O.jsx)(M,{children:(0,O.jsxs)(I,{className:`pt-6 space-y-4 max-w-md`,children:[(0,O.jsxs)(`div`,{className:`space-y-2`,children:[(0,O.jsx)(ea,{htmlFor:`email`,children:`Email address`}),(0,O.jsx)(ma,{type:`email`,id:`email`,placeholder:`name@example.com`})]}),(0,O.jsxs)(`div`,{className:`space-y-2`,children:[(0,O.jsx)(ea,{children:`Framework`}),(0,O.jsxs)(J,{children:[(0,O.jsx)(X,{children:(0,O.jsx)(Y,{placeholder:`Select framework`})}),(0,O.jsxs)(Z,{children:[(0,O.jsx)(Q,{value:`react`,children:`React`}),(0,O.jsx)(Q,{value:`vue`,children:`Vue`}),(0,O.jsx)(Q,{value:`svelte`,children:`Svelte`})]})]})]}),(0,O.jsxs)(`div`,{className:`flex items-center space-x-2`,children:[(0,O.jsx)(Qi,{id:`airplane-mode`}),(0,O.jsx)(ea,{htmlFor:`airplane-mode`,children:`Airplane Mode`})]})]})})]}),(0,O.jsxs)(`section`,{className:`space-y-4`,children:[(0,O.jsx)(`h2`,{className:`text-xl font-semibold`,children:`Tabs`}),(0,O.jsxs)(ya,{defaultValue:`account`,className:`w-[400px]`,children:[(0,O.jsxs)(ba,{children:[(0,O.jsx)(xa,{value:`account`,children:`Account`}),(0,O.jsx)(xa,{value:`password`,children:`Password`})]}),(0,O.jsx)(Sa,{value:`account`,children:(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Account`}),(0,O.jsx)(F,{children:`Make changes to your account here.`})]}),(0,O.jsx)(I,{className:`space-y-2`,children:(0,O.jsxs)(`div`,{className:`space-y-1`,children:[(0,O.jsx)(ea,{htmlFor:`name`,children:`Name`}),(0,O.jsx)(ma,{id:`name`,defaultValue:`Pedro Duarte`})]})}),(0,O.jsx)($r,{children:(0,O.jsx)(j,{children:`Save changes`})})]})}),(0,O.jsx)(Sa,{value:`password`,children:(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Password`}),(0,O.jsx)(F,{children:`Change your password here.`})]}),(0,O.jsx)(I,{className:`space-y-2`,children:(0,O.jsxs)(`div`,{className:`space-y-1`,children:[(0,O.jsx)(ea,{htmlFor:`current`,children:`Current password`}),(0,O.jsx)(ma,{id:`current`,type:`password`})]})}),(0,O.jsx)($r,{children:(0,O.jsx)(j,{children:`Save password`})})]})})]})]}),(0,O.jsxs)(`section`,{className:`space-y-4`,children:[(0,O.jsx)(`h2`,{className:`text-xl font-semibold`,children:`Feedback & Status`}),(0,O.jsxs)(`div`,{className:`grid gap-6 md:grid-cols-2`,children:[(0,O.jsxs)(`div`,{className:`space-y-4`,children:[(0,O.jsx)(`h3`,{className:`text-sm font-medium text-muted-foreground`,children:`Empty State`}),(0,O.jsx)(`div`,{className:`border rounded-lg p-4`,children:(0,O.jsx)(G,{icon:y,title:`No items found`,description:`You haven't created any items yet.`,action:{label:`Create Item`,onClick:()=>b(`Clicked create`)},className:`min-h-[200px]`})})]}),(0,O.jsxs)(`div`,{className:`space-y-4`,children:[(0,O.jsx)(`h3`,{className:`text-sm font-medium text-muted-foreground`,children:`Skeleton Loading`}),(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(W,{className:`h-5 w-[140px] mb-2`}),(0,O.jsx)(W,{className:`h-4 w-[250px]`})]}),(0,O.jsxs)(I,{className:`space-y-2`,children:[(0,O.jsx)(W,{className:`h-4 w-full`}),(0,O.jsx)(W,{className:`h-4 w-full`}),(0,O.jsx)(W,{className:`h-4 w-3/4`})]})]})]})]})]}),(0,O.jsxs)(`section`,{className:`space-y-4`,children:[(0,O.jsx)(`h2`,{className:`text-xl font-semibold`,children:`Toast Notifications`}),(0,O.jsxs)(`div`,{className:`flex flex-wrap gap-4`,children:[(0,O.jsx)(j,{variant:`outline`,onClick:()=>b(`Event has been created`),children:`Simple Toast`}),(0,O.jsx)(j,{variant:`outline`,onClick:()=>b.success(`Event created successfully`),children:`Success`}),(0,O.jsx)(j,{variant:`outline`,onClick:()=>b.error(`Failed to create event`),children:`Error`}),(0,O.jsx)(j,{variant:`outline`,onClick:()=>b.info(`New updates available`,{description:`Refresh to see changes`}),children:`With Description`}),(0,O.jsx)(j,{variant:`outline`,onClick:()=>b(`Event deleted`,{action:{label:`Undo`,onClick:()=>console.log(`Undo`)}}),children:`With Action`})]})]}),(0,O.jsxs)(`section`,{className:`space-y-4`,children:[(0,O.jsx)(`h2`,{className:`text-xl font-semibold`,children:`Breadcrumbs`}),(0,O.jsx)(`div`,{className:`p-4 border rounded-lg`,children:(0,O.jsx)(mi,{children:(0,O.jsxs)(hi,{children:[(0,O.jsx)(gi,{children:(0,O.jsx)(_i,{href:`/`,children:`Dashboard`})}),`              `,(0,O.jsx)(yi,{}),(0,O.jsx)(gi,{children:(0,O.jsx)(_i,{href:`/components`,children:`Components`})}),(0,O.jsx)(yi,{}),(0,O.jsx)(gi,{children:(0,O.jsx)(vi,{children:`Breadcrumb`})})]})})})]})]})}const Ta=C(`/`)({component:Ea});function Ea(){let e=vn(),t=w({queryKey:k.session(),queryFn:Ln,retry:!1,staleTime:3e4});return(0,T.useEffect)(()=>{t.isLoading||(t.data?.authenticated?e({to:`/dashboard/deployments`,replace:!0}):e({to:`/status`,replace:!0}))},[t.data?.authenticated,t.isLoading,e]),null}const Da=C(`/dashboard/`)({component:Oa});function Oa(){let e=vn();return(0,T.useEffect)(()=>{e({to:`/dashboard/deployments`,replace:!0})},[e]),null}const ka=C(`/admin/`)({component:Aa});function Aa(){let e=vn();return(0,T.useEffect)(()=>{e({to:`/admin/settings`,replace:!0})},[e]),null}const ja=C(`/dashboard/s3`)({component:Ma});function Ma(){let e=w({queryKey:k.workspaces(),queryFn:zn,staleTime:3e4}),t=(0,T.useMemo)(()=>e.data?.workspaces?.[0]?.id??``,[e.data?.workspaces]),n=w({queryKey:k.workspaceArtifacts(t),queryFn:async()=>Zn(t),staleTime:1e4,enabled:!!t}),r=n.data?.items??[];return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsx)(M,{variant:`glass`,children:(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`S3`}),(0,O.jsx)(F,{children:`Workspace artifacts and generated files (backed by the platform object store).`})]})}),(0,O.jsx)(M,{children:(0,O.jsx)(I,{className:`p-0`,children:e.isLoading||n.isLoading?(0,O.jsxs)(`div`,{className:`p-6 space-y-4`,children:[(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`})]}):e.isError||n.isError?(0,O.jsx)(`div`,{className:`p-8 text-center text-destructive`,children:`Failed to list objects.`}):r.length===0?(0,O.jsx)(G,{icon:y,title:`No objects found`,description:`No artifacts found for this workspace.`}):(0,O.jsxs)(`div`,{children:[(0,O.jsxs)(`div`,{className:`p-4 border-b flex items-center gap-3`,children:[(0,O.jsx)(`div`,{className:`text-sm font-medium`,children:`Workspace`}),(0,O.jsxs)(J,{value:t,disabled:!0,children:[(0,O.jsx)(X,{className:`w-[280px]`,children:(0,O.jsx)(Y,{placeholder:`Select workspace`})}),(0,O.jsx)(Z,{children:(e.data?.workspaces??[]).map(e=>(0,O.jsxs)(Q,{value:e.id,children:[e.name,` (`,e.slug,`)`]},e.id))})]})]}),(0,O.jsxs)(R,{children:[(0,O.jsx)(z,{children:(0,O.jsxs)(V,{children:[(0,O.jsx)(H,{children:`Object`}),(0,O.jsx)(H,{className:`w-[120px] text-right`,children:`Action`})]})}),(0,O.jsx)(B,{children:r.map(e=>(0,O.jsxs)(V,{children:[(0,O.jsx)(U,{className:`font-mono text-xs`,children:e.key}),(0,O.jsx)(U,{className:`text-right`,children:(0,O.jsxs)(j,{variant:`outline`,size:`sm`,onClick:async()=>{let n=await Qn(t,e.key),r=new Blob([Uint8Array.from(atob(n.fileData),e=>e.charCodeAt(0))]),i=URL.createObjectURL(r),a=document.createElement(`a`);a.href=i,a.download=e.key.split(`/`).pop()||`artifact`,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(i)},children:[(0,O.jsx)(Nt,{className:`mr-2 h-3 w-3`}),`Download`]})})]},e.key))})]})]})})})]})}var Na=An({tab:kn([`tls`,`ssh`]).optional().catch(`tls`)});const Pa=C(`/dashboard/pki`)({validateSearch:e=>Na.parse(e),loaderDeps:({search:{tab:e}})=>({tab:e}),loader:async({context:{queryClient:e}})=>{await Promise.all([e.ensureQueryData({queryKey:k.pkiRoot(),queryFn:$n,staleTime:6e4}),e.ensureQueryData({queryKey:k.pkiSshRoot(),queryFn:er,staleTime:6e4}),e.ensureQueryData({queryKey:k.pkiCerts(),queryFn:tr,staleTime:15e3}),e.ensureQueryData({queryKey:k.pkiSshCerts(),queryFn:nr,staleTime:15e3})])},component:Fa});function Fa(){let e=S(),t=Pa.useNavigate(),{tab:n}=Pa.useSearch(),r=w({queryKey:k.pkiRoot(),queryFn:$n,staleTime:6e4}),i=w({queryKey:k.pkiSshRoot(),queryFn:er,staleTime:6e4}),a=w({queryKey:k.pkiCerts(),queryFn:tr,staleTime:15e3}),o=w({queryKey:k.pkiSshCerts(),queryFn:nr,staleTime:15e3}),[s,c]=(0,T.useState)(``),[l,u]=(0,T.useState)(``),d=e=>{t({search:t=>({...t,tab:e}),replace:!0})},f=Cn({mutationFn:async()=>{let e=s.trim();if(!e)throw Error(`Common name is required`);return rr({commonName:e})},onSuccess:async()=>{c(``),b.success(`TLS Certificate Issued`,{description:`Download ready.`}),await e.invalidateQueries({queryKey:k.pkiCerts()})},onError:e=>{b.error(`Failed to issue TLS certificate`,{description:e.message})}}),p=Cn({mutationFn:async()=>{let e=l.split(/[,\s]+/g).map(e=>e.trim()).filter(Boolean);if(e.length===0)throw Error(`At least one principal is required`);return ir({principals:e})},onSuccess:async()=>{u(``),b.success(`SSH Certificate Issued`,{description:`Download ready.`}),await e.invalidateQueries({queryKey:k.pkiSshCerts()})},onError:e=>{b.error(`Failed to issue SSH certificate`,{description:e.message})}}),m=a.data?.certs??[],h=o.data?.certs??[],ee=(0,T.useMemo)(()=>i.data?.publicKey??``,[i.data?.publicKey]),te=(0,T.useMemo)(()=>r.data?.pem??``,[r.data?.pem]);return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsx)(M,{variant:`glass`,children:(0,O.jsx)(N,{children:(0,O.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,O.jsx)(`div`,{className:`p-2 rounded-full bg-primary/10`,children:(0,O.jsx)(ke,{className:`h-6 w-6 text-primary`})}),(0,O.jsxs)(`div`,{children:[(0,O.jsx)(P,{children:`PKI Management`}),(0,O.jsx)(F,{children:`Issue and manage TLS and SSH certificates signed by Skyforge.`})]})]})})}),(0,O.jsxs)(ya,{value:n,onValueChange:d,className:`space-y-6`,children:[(0,O.jsx)(`div`,{className:`flex items-center justify-between`,children:(0,O.jsxs)(ba,{children:[(0,O.jsxs)(xa,{value:`tls`,className:`gap-2`,children:[(0,O.jsx)(De,{className:`h-4 w-4`}),`TLS Certificates`]}),(0,O.jsxs)(xa,{value:`ssh`,className:`gap-2`,children:[(0,O.jsx)(Gt,{className:`h-4 w-4`}),`SSH Certificates`]})]})}),(0,O.jsxs)(Sa,{value:`tls`,className:`space-y-6 animate-in fade-in-50 duration-300`,children:[(0,O.jsxs)(`div`,{className:`grid gap-6 lg:grid-cols-2`,children:[(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{className:`text-sm`,children:`CA Root Certificate`}),(0,O.jsx)(F,{children:`Trust this PEM for Skyforge-issued TLS certs.`})]}),(0,O.jsxs)(I,{children:[r.isLoading?(0,O.jsx)(W,{className:`h-40 w-full`}):(0,O.jsx)(`textarea`,{className:`h-40 w-full rounded-md border bg-muted p-2 font-mono text-[10px] text-muted-foreground focus:outline-none`,readOnly:!0,value:te}),r.isError&&(0,O.jsx)(`div`,{className:`mt-2 text-xs text-destructive`,children:`Failed to load CA root.`})]})]}),(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{className:`text-sm`,children:`Issue New TLS Certificate`}),(0,O.jsx)(F,{children:`Create a short-lived certificate for internal services.`})]}),(0,O.jsxs)(I,{className:`space-y-4`,children:[(0,O.jsxs)(`div`,{className:`grid gap-2`,children:[(0,O.jsx)(ea,{htmlFor:`common-name`,children:`Common name (CN)`}),(0,O.jsx)(ma,{id:`common-name`,value:s,onChange:e=>c(e.target.value),placeholder:`e.g. service.internal`})]}),(0,O.jsxs)(j,{className:`w-full`,disabled:f.isPending,onClick:()=>f.mutate(),children:[f.isPending&&(0,O.jsx)(Le,{className:`mr-2 h-4 w-4 animate-spin`}),f.isPending?`Generating…`:`Issue Certificate`]})]})]})]}),(0,O.jsxs)(M,{children:[(0,O.jsx)(N,{children:(0,O.jsx)(P,{children:`Issued TLS Certificates`})}),(0,O.jsxs)(I,{className:`p-0`,children:[a.isLoading?(0,O.jsxs)(`div`,{className:`p-6 space-y-4`,children:[(0,O.jsx)(W,{className:`h-10 w-full`}),(0,O.jsx)(W,{className:`h-10 w-full`})]}):m.length===0?(0,O.jsx)(G,{icon:y,title:`No TLS certificates`,description:`You haven't issued any TLS certificates yet.`}):(0,O.jsx)(Zi,{className:`border-none`,children:(0,O.jsxs)(R,{children:[(0,O.jsx)(z,{children:(0,O.jsxs)(V,{children:[(0,O.jsx)(H,{children:`Common Name`}),(0,O.jsx)(H,{children:`Expires`}),(0,O.jsx)(H,{className:`text-right`,children:`Action`})]})}),(0,O.jsx)(B,{children:m.map(e=>(0,O.jsxs)(V,{children:[(0,O.jsx)(U,{className:`font-medium`,children:e.commonName}),(0,O.jsx)(U,{className:`text-muted-foreground text-xs`,children:e.expiresAt}),(0,O.jsx)(U,{className:`text-right`,children:(0,O.jsx)(j,{variant:`ghost`,size:`sm`,asChild:!0,children:(0,O.jsxs)(`a`,{href:`${Pn}/pki/certs/${encodeURIComponent(e.id)}/download`,target:`_blank`,rel:`noreferrer`,children:[(0,O.jsx)(Nt,{className:`mr-2 h-3 w-3`}),`Download Bundle`]})})})]},e.id))})]})}),a.isError&&(0,O.jsx)(`div`,{className:`p-4 text-center text-xs text-destructive`,children:`Failed to list certs.`})]})]})]}),(0,O.jsxs)(Sa,{value:`ssh`,className:`space-y-6 animate-in fade-in-50 duration-300`,children:[(0,O.jsxs)(`div`,{className:`grid gap-6 lg:grid-cols-2`,children:[(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{className:`text-sm`,children:`SSH CA Public Key`}),(0,O.jsx)(F,{children:`Trust this key for Skyforge-issued SSH certs.`})]}),(0,O.jsxs)(I,{children:[i.isLoading?(0,O.jsx)(W,{className:`h-40 w-full`}):(0,O.jsx)(`textarea`,{className:`h-40 w-full rounded-md border bg-muted p-2 font-mono text-[10px] text-muted-foreground focus:outline-none`,readOnly:!0,value:ee}),i.isError&&(0,O.jsx)(`div`,{className:`mt-2 text-xs text-destructive`,children:`Failed to load SSH CA key.`})]})]}),(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{className:`text-sm`,children:`Issue New SSH Certificate`}),(0,O.jsx)(F,{children:`Authorize keys for specific principals.`})]}),(0,O.jsxs)(I,{className:`space-y-4`,children:[(0,O.jsxs)(`div`,{className:`grid gap-2`,children:[(0,O.jsx)(ea,{htmlFor:`principals`,children:`Principals (comma separated)`}),(0,O.jsx)(ma,{id:`principals`,value:l,onChange:e=>u(e.target.value),placeholder:`e.g. root, ubuntu, admin`})]}),(0,O.jsxs)(j,{className:`w-full`,disabled:p.isPending,onClick:()=>p.mutate(),children:[p.isPending&&(0,O.jsx)(Le,{className:`mr-2 h-4 w-4 animate-spin`}),p.isPending?`Generating…`:`Issue Certificate`]})]})]})]}),(0,O.jsxs)(M,{children:[(0,O.jsx)(N,{children:(0,O.jsx)(P,{children:`Issued SSH Certificates`})}),(0,O.jsxs)(I,{className:`p-0`,children:[o.isLoading?(0,O.jsxs)(`div`,{className:`p-6 space-y-4`,children:[(0,O.jsx)(W,{className:`h-10 w-full`}),(0,O.jsx)(W,{className:`h-10 w-full`})]}):h.length===0?(0,O.jsx)(G,{icon:y,title:`No SSH certificates`,description:`You haven't issued any SSH certificates yet.`}):(0,O.jsx)(Zi,{className:`border-none`,children:(0,O.jsxs)(R,{children:[(0,O.jsx)(z,{children:(0,O.jsxs)(V,{children:[(0,O.jsx)(H,{children:`Principals`}),(0,O.jsx)(H,{children:`Expires`}),(0,O.jsx)(H,{className:`text-right`,children:`Action`})]})}),(0,O.jsx)(B,{children:h.map(e=>(0,O.jsxs)(V,{children:[(0,O.jsx)(U,{className:`font-medium`,children:e.principals.map(e=>(0,O.jsx)(`span`,{className:`inline-flex items-center rounded-md bg-muted px-2 py-1 text-xs font-medium text-muted-foreground mr-1`,children:e},e))}),(0,O.jsx)(U,{className:`text-muted-foreground text-xs`,children:e.expiresAt}),(0,O.jsx)(U,{className:`text-right`,children:(0,O.jsx)(j,{variant:`ghost`,size:`sm`,asChild:!0,children:(0,O.jsxs)(`a`,{href:`${Pn}/pki/ssh/certs/${encodeURIComponent(e.id)}/download`,target:`_blank`,rel:`noreferrer`,children:[(0,O.jsx)(Nt,{className:`mr-2 h-3 w-3`}),`Download Bundle`]})})})]},e.id))})]})}),o.isError&&(0,O.jsx)(`div`,{className:`p-4 text-center text-xs text-destructive`,children:`Failed to list SSH certs.`})]})]})]})]})]})}const Ia=C(`/admin/settings`)({component:La});function La(){let e=!!S().getQueryData(k.session())?.isAdmin;return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsx)(M,{variant:`glass`,children:(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`System settings`}),(0,O.jsx)(F,{children:`Admin-only settings for Skyforge.`})]})}),!e&&(0,O.jsx)(M,{variant:`danger`,children:(0,O.jsx)(I,{className:`pt-6`,children:(0,O.jsx)(`div`,{className:`text-center font-medium`,children:`Admin access required.`})})}),(0,O.jsx)(M,{children:(0,O.jsx)(I,{className:`pt-6`,children:(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground`,children:`This build uses Server-Sent Events (SSE) for live updates; polling configuration has been removed.`})})})]})}var Ra=An({q:On().optional().catch(``),tab:kn([`resources`,`costs`,`usage`]).optional().catch(`resources`)});const za=C(`/admin/governance`)({validateSearch:e=>Ra.parse(e),loaderDeps:({search:{q:e,tab:t}})=>({q:e,tab:t}),loader:async({context:{queryClient:e}})=>{await Promise.all([e.ensureQueryData({queryKey:k.governanceSummary(),queryFn:cr}),e.ensureQueryData({queryKey:k.governanceResources(`500`),queryFn:()=>lr({limit:`500`})}),e.ensureQueryData({queryKey:k.governanceCosts(`50`),queryFn:()=>ur({limit:`50`})}),e.ensureQueryData({queryKey:k.governanceUsage(`50`),queryFn:()=>dr({limit:`50`})})])},component:Ba});function Ba(){let e=S(),t=za.useNavigate(),{q:n,tab:r}=za.useSearch(),i=!!e.getQueryData(k.session())?.isAdmin,a=w({queryKey:k.governanceSummary(),queryFn:cr,staleTime:3e4}),o=w({queryKey:k.governanceResources(`500`),queryFn:()=>lr({limit:`500`}),staleTime:3e4}),s=w({queryKey:k.governanceCosts(`50`),queryFn:()=>ur({limit:`50`}),staleTime:3e4}),c=w({queryKey:k.governanceUsage(`50`),queryFn:()=>dr({limit:`50`}),staleTime:3e4}),l=(0,T.useMemo)(()=>{let e=o.data?.resources??[],t=n?.trim().toLowerCase()||``;return t?e.filter(e=>[e.name,e.resourceId,e.resourceType,e.workspaceName,e.owner,e.provider].filter(Boolean).join(` `).toLowerCase().includes(t)):e},[o.data?.resources,n]),u=Cn({mutationFn:async()=>{await fr()},onSuccess:async()=>{b.success(`Governance sources synced`,{description:`Resource inventory updated.`}),await Promise.all([e.invalidateQueries({queryKey:k.governanceSummary()}),e.invalidateQueries({queryKey:k.governanceResources(`500`)}),e.invalidateQueries({queryKey:k.governanceCosts(`50`)}),e.invalidateQueries({queryKey:k.governanceUsage(`50`)})])},onError:e=>{b.error(`Failed to sync governance sources`,{description:e.message})}}),d=a.data,p=e=>{t({search:t=>({...t,q:e}),replace:!0})};return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsx)(M,{variant:`glass`,children:(0,O.jsx)(N,{children:(0,O.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,O.jsxs)(`div`,{children:[(0,O.jsx)(P,{children:`Governance`}),(0,O.jsx)(F,{children:`Admin-only inventory, cost, and usage telemetry.`})]}),(0,O.jsxs)(j,{variant:`outline`,size:`sm`,disabled:u.isPending||!i,onClick:()=>u.mutate(),children:[(0,O.jsx)(Ve,{className:`mr-2 h-4 w-4 ${u.isPending?`animate-spin`:``}`}),u.isPending?`Syncing…`:`Sync sources`]})]})})}),!i&&(0,O.jsx)(M,{variant:`danger`,children:(0,O.jsx)(I,{className:`pt-6`,children:(0,O.jsx)(`div`,{className:`text-center font-medium text-destructive`,children:`Admin access required.`})})}),(a.isError||o.isError||s.isError||c.isError)&&(0,O.jsx)(M,{variant:`danger`,children:(0,O.jsx)(I,{className:`pt-6`,children:(0,O.jsx)(`div`,{className:`text-center font-medium`,children:`Failed to load governance data.`})})}),a.isLoading?(0,O.jsx)(Bi,{children:[1,2,3,4].map(e=>(0,O.jsxs)(q,{className:`h-32`,children:[(0,O.jsx)(W,{className:`h-4 w-24 mb-4`}),(0,O.jsx)(W,{className:`h-8 w-16`})]},e))}):(0,O.jsxs)(Bi,{children:[(0,O.jsx)(Vi,{title:`Resources tracked`,value:String(d?.resourceCount??`—`),icon:(0,O.jsx)(ht,{className:`h-5 w-5`}),gradient:`blue`}),(0,O.jsx)(Vi,{title:`Active resources`,value:String(d?.activeResources??`—`),icon:(0,O.jsx)(ge,{className:`h-5 w-5`}),gradient:`green`}),(0,O.jsx)(Vi,{title:`Workspaces tracked`,value:String(d?.workspacesTracked??`—`),icon:(0,O.jsx)(Zt,{className:`h-5 w-5`}),gradient:`purple`}),(0,O.jsx)(Vi,{title:`Last 30d spend`,value:d?`${d.costLast30Days} ${d.costCurrency}`:`—`,icon:(0,O.jsx)(vt,{className:`h-5 w-5`}),gradient:`orange`})]}),(0,O.jsxs)(ya,{value:r,onValueChange:e=>{t({search:t=>({...t,tab:e}),replace:!0})},className:`space-y-6`,children:[(0,O.jsxs)(ba,{children:[(0,O.jsxs)(xa,{value:`resources`,className:`gap-2`,children:[(0,O.jsx)(ht,{className:`h-4 w-4`}),`Resources`]}),(0,O.jsxs)(xa,{value:`costs`,className:`gap-2`,children:[(0,O.jsx)(Ye,{className:`h-4 w-4`}),`Financials`]}),(0,O.jsxs)(xa,{value:`usage`,className:`gap-2`,children:[(0,O.jsx)(f,{className:`h-4 w-4`}),`Telemetry`]})]}),(0,O.jsx)(Sa,{value:`resources`,className:`space-y-6 animate-in fade-in-50`,children:(0,O.jsxs)(M,{children:[(0,O.jsx)(N,{children:(0,O.jsxs)(`div`,{className:`flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between`,children:[(0,O.jsx)(P,{children:`Resource Inventory`}),(0,O.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,O.jsxs)(`div`,{className:`relative`,children:[(0,O.jsx)(ae,{className:`absolute left-2 top-2.5 h-4 w-4 text-muted-foreground`}),(0,O.jsx)(ma,{className:`pl-8 w-full sm:w-[300px]`,placeholder:`Search resources…`,value:n||``,onChange:e=>p(e.target.value)})]}),!o.isLoading&&(0,O.jsxs)(`div`,{className:`text-xs text-muted-foreground whitespace-nowrap hidden sm:block`,children:[l.length,` shown`]})]})]})}),(0,O.jsx)(I,{children:o.isLoading?(0,O.jsxs)(`div`,{className:`space-y-4`,children:[(0,O.jsx)(W,{className:`h-10 w-full`}),(0,O.jsx)(W,{className:`h-10 w-full`}),(0,O.jsx)(W,{className:`h-10 w-full`})]}):l.length===0?(0,O.jsx)(G,{icon:y,title:`No resources found`,description:`No resources match your search criteria.`}):(0,O.jsxs)(R,{children:[(0,O.jsx)(z,{children:(0,O.jsxs)(V,{children:[(0,O.jsx)(H,{children:`Name`}),(0,O.jsx)(H,{children:`Provider`}),(0,O.jsx)(H,{children:`Type`}),(0,O.jsx)(H,{children:`Workspace`}),(0,O.jsx)(H,{children:`Owner`}),(0,O.jsx)(H,{children:`Status`})]})}),(0,O.jsx)(B,{children:l.slice(0,500).map(e=>(0,O.jsxs)(V,{children:[(0,O.jsx)(U,{className:`font-medium`,children:e.name}),(0,O.jsx)(U,{children:e.provider}),(0,O.jsx)(U,{children:e.resourceType}),(0,O.jsx)(U,{children:e.workspaceName}),(0,O.jsx)(U,{children:e.owner}),(0,O.jsx)(U,{children:(0,O.jsx)(K,{variant:e.status===`active`?`default`:`secondary`,children:e.status??`unknown`})})]},e.resourceId))})]})})]})}),(0,O.jsx)(Sa,{value:`costs`,className:`space-y-6 animate-in fade-in-50`,children:(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Cost Snapshots`}),(0,O.jsx)(F,{children:`Historical spend data per provider.`})]}),(0,O.jsx)(I,{children:s.isLoading?(0,O.jsxs)(`div`,{className:`space-y-2`,children:[(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`})]}):(s.data?.costs??[]).length===0?(0,O.jsx)(G,{icon:Ye,title:`No cost data`,description:`No financial snapshots available.`}):(0,O.jsxs)(R,{children:[(0,O.jsx)(z,{children:(0,O.jsxs)(V,{children:[(0,O.jsx)(H,{children:`Provider`}),(0,O.jsx)(H,{children:`Currency`}),(0,O.jsx)(H,{children:`Amount`}),(0,O.jsx)(H,{className:`text-right`,children:`Period End`})]})}),(0,O.jsx)(B,{children:(s.data?.costs??[]).slice(0,50).map((e,t)=>(0,O.jsxs)(V,{children:[(0,O.jsx)(U,{className:`font-medium`,children:e.provider}),(0,O.jsx)(U,{children:e.currency}),(0,O.jsx)(U,{children:e.amount}),(0,O.jsx)(U,{className:`text-right text-muted-foreground`,children:e.periodEnd})]},t))})]})})]})}),(0,O.jsx)(Sa,{value:`usage`,className:`space-y-6 animate-in fade-in-50`,children:(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Usage Telemetry`}),(0,O.jsx)(F,{children:`System usage metrics and limits.`})]}),(0,O.jsx)(I,{children:c.isLoading?(0,O.jsxs)(`div`,{className:`space-y-2`,children:[(0,O.jsx)(W,{className:`h-12 w-full`}),(0,O.jsx)(W,{className:`h-12 w-full`})]}):(c.data?.usage??[]).length===0?(0,O.jsx)(G,{icon:f,title:`No usage data`,description:`No telemetry snapshots available.`}):(0,O.jsxs)(R,{children:[(0,O.jsx)(z,{children:(0,O.jsxs)(V,{children:[(0,O.jsx)(H,{children:`Provider`}),(0,O.jsx)(H,{children:`Metric`}),(0,O.jsx)(H,{children:`Value`}),(0,O.jsx)(H,{className:`text-right`,children:`Collected At`})]})}),(0,O.jsx)(B,{children:(c.data?.usage??[]).slice(0,50).map((e,t)=>(0,O.jsxs)(V,{children:[(0,O.jsx)(U,{className:`font-medium`,children:e.provider}),(0,O.jsx)(U,{children:e.metric}),(0,O.jsx)(U,{children:e.value}),(0,O.jsx)(U,{className:`text-right text-muted-foreground`,children:e.collectedAt})]},t))})]})})]})})]})]})}function Va(e){let t=S(),n=(0,T.useMemo)(()=>`${Pn}/dashboard/events`,[]);(0,T.useEffect)(()=>{if(!e)return;let r=Oi(n,{snapshot:e=>{try{let n=JSON.parse(e.data);t.setQueryData(k.dashboardSnapshot(),n)}catch{}}});return()=>{r.close()}},[e,t,n])}var Ha=An({workspace:On().optional().catch(``)});const Ua=C(`/dashboard/deployments/`)({validateSearch:e=>Ha.parse(e),loaderDeps:({search:{workspace:e}})=>({workspace:e}),loader:async({context:{queryClient:e}})=>{await e.ensureQueryData({queryKey:k.workspaces(),queryFn:zn,staleTime:3e4})},component:Wa});function Wa(){Va(!0);let e=vn(),t=S(),{workspace:n}=Ua.useSearch(),r=w({queryKey:k.dashboardSnapshot(),queryFn:async()=>null,initialData:null,retry:!1,staleTime:1/0}),[i,a]=(0,T.useState)(null),[o,c]=(0,T.useState)(!1),[u,d]=(0,T.useState)(``),[f,p]=(0,T.useState)(`all`),[m,h]=(0,T.useState)(`all`),[ee,te]=(0,T.useState)(!0),g=r.data?.workspaces??[],_=(0,T.useMemo)(()=>n&&g.some(e=>e.id===n)?n:g[0]?.id??``,[n,g]),ne=t=>{e({search:{workspace:t},replace:!0})},ie=(0,T.useMemo)(()=>{let e=r.data?.deployments??[];return _?e.filter(e=>e.workspaceId===_):e},[_,r.data?.deployments]),oe=(0,T.useMemo)(()=>ie.filter(e=>{if(u&&!e.name.toLowerCase().includes(u.toLowerCase()))return!1;if(f!==`all`){let t=(e.activeTaskStatus??e.lastStatus??`unknown`).toLowerCase();if(f===`running`&&![`running`,`active`,`healthy`].includes(t)||f===`stopped`&&![`created`,`stopped`,`success`,`succeeded`].includes(t)||f===`failed`&&![`failed`,`error`,`crashloopbackoff`].includes(t))return!1}return!(m!==`all`&&(m===`netlab`&&!e.type.startsWith(`netlab`)||m===`containerlab`&&![`containerlab`,`clabernetes`].includes(e.type)||m===`terraform`&&e.type!==`terraform`||m===`labpp`&&e.type!==`labpp`))}),[ie,u,f,m]),se=(0,T.useMemo)(()=>{let e=r.data?.runs??[];return _?e.filter(e=>String(e.workspaceId??``)===_):e},[_,r.data?.runs]),ce=Fn(window.location.pathname+window.location.search),le=async e=>{try{await pr(e.workspaceId,e.id),b.success(`Deployment starting`,{description:`${e.name} is queued to start.`})}catch(e){b.error(`Failed to start`,{description:e.message})}},ue=async e=>{try{await mr(e.workspaceId,e.id),b.success(`Deployment stopping`,{description:`${e.name} is queued to stop.`})}catch(e){b.error(`Failed to stop`,{description:e.message})}},fe=async()=>{if(i)try{await hr(i.workspaceId,i.id),b.success(`Deployment destroyed`,{description:`${i.name} has been deleted.`}),c(!1),a(null)}catch(e){b.error(`Failed to destroy`,{description:e.message})}},pe=e=>{switch(e){case`netlab`:return`Netlab (BYOS)`;case`netlab-c9s`:return`Netlab`;case`containerlab`:return`Containerlab (BYOS)`;case`clabernetes`:return`Containerlab`;case`labpp`:return`LabPP`;default:return e}};return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsxs)(`div`,{className:`flex flex-col gap-4 md:flex-row md:items-center md:justify-between border-b pb-6`,children:[(0,O.jsxs)(`div`,{children:[(0,O.jsx)(`h1`,{className:`text-2xl font-bold tracking-tight`,children:`Deployments`}),(0,O.jsx)(`p`,{className:`text-muted-foreground text-sm`,children:`Manage deployments and monitor workspace activity.`})]}),(0,O.jsx)(`div`,{className:`flex items-center gap-3`,children:(0,O.jsxs)(`div`,{className:`flex items-center gap-2 bg-muted/50 p-1 rounded-lg border`,children:[(0,O.jsxs)(J,{value:_,onValueChange:ne,disabled:g.length===0,children:[(0,O.jsx)(X,{className:`w-[200px] h-8 bg-transparent border-0 focus:ring-0 shadow-none`,children:(0,O.jsx)(Y,{placeholder:`Select workspace`})}),(0,O.jsx)(Z,{children:g.map(e=>(0,O.jsxs)(Q,{value:e.id,children:[e.name,` (`,e.slug,`)`]},e.id))})]}),(0,O.jsx)(`div`,{className:`h-4 w-px bg-border`}),(0,O.jsx)(x,{to:`/dashboard/workspaces/new`,title:`Create workspace`,className:A({variant:`ghost`,size:`icon`,className:`h-8 w-8`}),children:(0,O.jsx)(re,{className:`h-4 w-4`})}),(0,O.jsx)(j,{variant:`ghost`,size:`icon`,className:`h-8 w-8`,title:`Workspace Settings (Coming Soon)`,children:(0,O.jsx)(s,{className:`h-4 w-4 text-muted-foreground`})})]})})]}),!r.data&&(0,O.jsx)(M,{className:`border-dashed`,children:(0,O.jsx)(I,{className:`pt-6`,children:(0,O.jsxs)(`div`,{className:`flex flex-col items-center justify-center space-y-4 py-8`,children:[(0,O.jsx)(W,{className:`h-4 w-64`}),(0,O.jsxs)(`div`,{className:`text-center text-muted-foreground`,children:[`Waiting for platform stream…`,(0,O.jsxs)(`div`,{className:`mt-2 text-xs`,children:[`If you are logged out,`,` `,(0,O.jsx)(`a`,{className:`text-primary underline hover:no-underline`,href:ce,onClick:e=>{e.preventDefault(),(async()=>{if(!await yr({loginHref:ce})){window.location.href=ce;return}await t.invalidateQueries({queryKey:k.session()})})()},children:`login`}),`.`]})]})]})})}),(0,O.jsxs)(`div`,{className:`flex flex-col lg:flex-row gap-6 relative items-start`,children:[(0,O.jsxs)(`div`,{className:`flex-1 min-w-0 space-y-4 w-full`,children:[(0,O.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-3`,children:[(0,O.jsxs)(`div`,{className:`relative flex-1`,children:[(0,O.jsx)(ae,{className:`absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground`}),(0,O.jsx)(ma,{placeholder:`Search deployments...`,className:`pl-9`,value:u,onChange:e=>d(e.target.value)})]}),(0,O.jsxs)(J,{value:f,onValueChange:p,children:[(0,O.jsxs)(X,{className:`w-[140px]`,children:[(0,O.jsx)(At,{className:`mr-2 h-4 w-4 text-muted-foreground`}),(0,O.jsx)(Y,{placeholder:`Status`})]}),(0,O.jsxs)(Z,{children:[(0,O.jsx)(Q,{value:`all`,children:`All Status`}),(0,O.jsx)(Q,{value:`running`,children:`Running`}),(0,O.jsx)(Q,{value:`stopped`,children:`Stopped`}),(0,O.jsx)(Q,{value:`failed`,children:`Failed`})]})]}),(0,O.jsxs)(J,{value:m,onValueChange:h,children:[(0,O.jsxs)(X,{className:`w-[140px]`,children:[(0,O.jsx)(xe,{className:`mr-2 h-4 w-4 text-muted-foreground`}),(0,O.jsx)(Y,{placeholder:`Type`})]}),(0,O.jsxs)(Z,{children:[(0,O.jsx)(Q,{value:`all`,children:`All Types`}),(0,O.jsx)(Q,{value:`netlab`,children:`Netlab`}),(0,O.jsx)(Q,{value:`containerlab`,children:`Containerlab`}),(0,O.jsx)(Q,{value:`terraform`,children:`Terraform`}),(0,O.jsx)(Q,{value:`labpp`,children:`LabPP`})]})]}),(0,O.jsxs)(x,{to:`/dashboard/deployments/new`,search:{workspace:_},className:A({variant:`default`}),children:[(0,O.jsx)(re,{className:`mr-2 h-4 w-4`}),` Create`]})]}),(0,O.jsx)(M,{children:(0,O.jsx)(I,{className:`p-0`,children:r.data?oe.length===0?(0,O.jsx)(G,{icon:y,title:`No deployments found`,description:u||f!==`all`?`Try adjusting your filters.`:`You haven't created any deployments in this workspace yet.`,action:!u&&f===`all`?{label:`Create deployment`,onClick:()=>e({to:`/dashboard/deployments/new`,search:{workspace:_}})}:void 0}):(0,O.jsx)(Zi,{className:`border-none`,children:(0,O.jsxs)(R,{children:[(0,O.jsx)(z,{children:(0,O.jsxs)(V,{children:[(0,O.jsx)(H,{children:`Name`}),(0,O.jsx)(H,{children:`Type`}),(0,O.jsx)(H,{children:`Status`}),(0,O.jsx)(H,{className:`text-right`,children:`Actions`})]})}),(0,O.jsx)(B,{children:oe.map(t=>(0,O.jsxs)(V,{children:[(0,O.jsx)(U,{className:`font-medium text-foreground`,children:(0,O.jsx)(x,{to:`/dashboard/deployments/$deploymentId`,params:{deploymentId:t.id},className:`hover:underline flex items-center gap-2`,children:t.name})}),(0,O.jsx)(U,{className:`text-muted-foreground`,children:pe(t.type)}),(0,O.jsx)(U,{children:(0,O.jsx)(Ga,{status:t.activeTaskStatus??t.lastStatus??`unknown`})}),(0,O.jsx)(U,{className:`text-right`,children:(0,O.jsxs)(br,{children:[(0,O.jsx)(xr,{asChild:!0,children:(0,O.jsxs)(j,{variant:`ghost`,size:`icon`,className:`h-8 w-8`,children:[(0,O.jsx)(Bt,{className:`h-4 w-4`}),(0,O.jsx)(`span`,{className:`sr-only`,children:`Open menu`})]})}),(0,O.jsxs)(wr,{align:`end`,children:[(0,O.jsx)(Or,{children:`Actions`}),(0,O.jsxs)(Tr,{onClick:()=>e({to:`/dashboard/deployments/$deploymentId`,params:{deploymentId:t.id}}),children:[(0,O.jsx)(Qe,{className:`mr-2 h-4 w-4`}),`Details`]}),(0,O.jsx)(kr,{}),(0,O.jsxs)(Tr,{onClick:()=>le(t),disabled:!!t.activeTaskId,children:[(0,O.jsx)(de,{className:`mr-2 h-4 w-4`}),`Start`]}),(0,O.jsxs)(Tr,{onClick:()=>ue(t),disabled:!t.activeTaskId,children:[(0,O.jsx)(tt,{className:`mr-2 h-4 w-4`}),`Stop`]}),(0,O.jsx)(kr,{}),(0,O.jsxs)(Tr,{onClick:()=>{a(t),c(!0)},className:`text-destructive focus:text-destructive`,disabled:!!t.activeTaskId,children:[(0,O.jsx)(Te,{className:`mr-2 h-4 w-4`}),`Destroy`]})]})]})})]},t.id))})]})}):(0,O.jsxs)(`div`,{className:`p-6 space-y-4`,children:[(0,O.jsx)(W,{className:`h-10 w-full`}),(0,O.jsx)(W,{className:`h-10 w-full`}),(0,O.jsx)(W,{className:`h-10 w-full`})]})})})]}),(0,O.jsxs)(`div`,{className:D(`transition-all duration-300 ease-in-out border-l space-y-4 shrink-0`,ee?`w-full lg:w-80 xl:w-96 pl-6 opacity-100`:`w-0 lg:w-12 pl-0 opacity-100 border-none lg:border-l`),children:[(0,O.jsx)(`div`,{className:D(`flex items-center gap-2 h-[40px]`,!ee&&`justify-center`),children:ee?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ge,{className:`h-4 w-4 text-muted-foreground`}),(0,O.jsx)(`h3`,{className:`flex-1 text-sm font-semibold text-muted-foreground uppercase tracking-wider`,children:`Activity Feed`}),(0,O.jsx)(j,{variant:`ghost`,size:`icon`,className:`h-6 w-6 text-muted-foreground hover:text-foreground`,onClick:()=>te(!1),title:`Collapse feed`,children:(0,O.jsx)(l,{className:`h-4 w-4`})})]}):(0,O.jsx)(j,{variant:`ghost`,size:`icon`,className:`h-8 w-8 text-muted-foreground hover:text-foreground`,onClick:()=>te(!0),title:`Expand activity feed`,children:(0,O.jsx)(on,{className:`h-4 w-4`})})}),(0,O.jsx)(`div`,{className:D(`space-y-3`,!ee&&`hidden`),children:r.data?se.length===0?(0,O.jsx)(M,{children:(0,O.jsx)(I,{className:`p-6 text-center text-sm text-muted-foreground`,children:`No recent activity.`})}):(0,O.jsx)(`div`,{className:`space-y-3`,children:se.slice(0,15).map(e=>([`success`,`failed`,`canceled`,`error`].includes(String(e.status??``).toLowerCase()),(0,O.jsx)(x,{to:`/dashboard/runs/$runId`,params:{runId:String(e.id??``)},className:`block group`,children:(0,O.jsx)(M,{className:`hover:border-primary/50 transition-colors`,children:(0,O.jsxs)(I,{className:`p-3`,children:[(0,O.jsxs)(`div`,{className:`flex items-start justify-between gap-2`,children:[(0,O.jsxs)(`div`,{className:`flex flex-col gap-1 min-w-0`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,O.jsxs)(`span`,{className:`font-mono text-xs font-medium text-foreground`,children:[`#`,String(e.id??``)]}),(0,O.jsx)(`span`,{className:`text-xs text-muted-foreground truncate max-w-[120px]`,children:String(e.tpl_alias??e.type??`Run`)})]}),(0,O.jsx)(`div`,{className:`text-xs text-muted-foreground truncate`,children:String(e.message||`No message`)})]}),(0,O.jsx)(Ga,{status:String(e.status??``),size:`xs`})]}),(0,O.jsxs)(`div`,{className:`mt-2 flex items-center justify-between text-[10px] text-muted-foreground`,children:[(0,O.jsx)(`span`,{children:String(e.user_name??`system`)}),(0,O.jsx)(`span`,{children:new Date(String(e.created)).toLocaleString(void 0,{month:`short`,day:`numeric`,hour:`numeric`,minute:`numeric`})})]})]})})},String(e.id??Math.random()))))}):(0,O.jsxs)(`div`,{className:`space-y-3`,children:[(0,O.jsx)(W,{className:`h-20 w-full`}),(0,O.jsx)(W,{className:`h-20 w-full`})]})})]})]}),(0,O.jsx)(na,{open:o,onOpenChange:c,children:(0,O.jsxs)(aa,{children:[(0,O.jsxs)(oa,{children:[(0,O.jsx)(ca,{children:`Are you absolutely sure?`}),(0,O.jsxs)(la,{children:[`This will permanently delete the deployment "`,i?.name,`" and remove all associated infrastructure. This action cannot be undone.`]})]}),(0,O.jsxs)(sa,{children:[(0,O.jsx)(da,{children:`Cancel`}),(0,O.jsx)(ua,{onClick:fe,className:A({variant:`destructive`}),children:`Destroy`})]})]})})]})}function Ga({status:e,size:t=`default`}){let n=`secondary`,r=e.toLowerCase();return[`running`,`active`,`healthy`,`succeeded`,`success`].includes(r)&&(n=`default`),[`failed`,`error`,`stopped`,`crashloopbackoff`].includes(r)&&(n=`destructive`),(0,O.jsx)(K,{variant:n,className:`capitalize ${t===`xs`?`px-1.5 py-0 text-[10px] h-5`:``}`,children:e})}var Ka=Je,qa=T.createContext({}),Ja=({...e})=>(0,O.jsx)(qa.Provider,{value:{name:e.name},children:(0,O.jsx)(mt,{...e})}),Ya=()=>{let e=T.useContext(qa),t=T.useContext(Xa),{getFieldState:n,formState:r}=dn(),i=n(e.name,r);if(!e)throw Error(`useFormField should be used within <FormField>`);let{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},Xa=T.createContext({}),Za=T.forwardRef(({className:e,...t},n)=>{let r=T.useId();return(0,O.jsx)(Xa.Provider,{value:{id:r},children:(0,O.jsx)(`div`,{ref:n,className:D(`space-y-2`,e),...t})})});Za.displayName=`FormItem`;var Qa=T.forwardRef(({className:e,...t},n)=>{let{error:r,formItemId:i}=Ya();return(0,O.jsx)(ea,{ref:n,className:D(r&&`text-destructive`,e),htmlFor:i,...t})});Qa.displayName=`FormLabel`;var $a=T.forwardRef(({...e},t)=>{let{error:n,formItemId:r,formDescriptionId:i,formMessageId:a}=Ya();return(0,O.jsx)(Kt,{ref:t,id:r,"aria-describedby":n?`${i} ${a}`:`${i}`,"aria-invalid":!!n,...e})});$a.displayName=`FormControl`;var eo=T.forwardRef(({className:e,...t},n)=>{let{formDescriptionId:r}=Ya();return(0,O.jsx)(`p`,{ref:n,id:r,className:D(`text-sm text-muted-foreground`,e),...t})});eo.displayName=`FormDescription`;var $=T.forwardRef(({className:e,children:t,...n},r)=>{let{error:i,formMessageId:a}=Ya(),o=i?String(i?.message):t;return o?(0,O.jsx)(`p`,{ref:r,id:a,className:D(`text-sm font-medium text-destructive`,e),...n,children:o}):null});$.displayName=`FormMessage`;var to=T.forwardRef(({className:e,...t},n)=>(0,O.jsx)(`textarea`,{className:D(`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,e),ref:n,...t}));to.displayName=`Textarea`;var no=An({name:On().min(2,`Name must be at least 2 characters`),slug:On().min(2,`Slug must be at least 2 characters`).regex(/^[a-z0-9-]+$/,`Slug must contain only lowercase letters, numbers, and dashes`),description:On().optional()});const ro=C(`/dashboard/workspaces/new`)({component:io});function io(){let e=vn(),t=S(),n=tn({resolver:_t(no),defaultValues:{name:``,slug:``,description:``}}),r=Cn({mutationFn:e=>Xn({name:e.name,slug:e.slug,description:e.description||``,isPublic:!1,allowCustomEveServers:!1,allowCustomNetlabServers:!1,allowExternalTemplateRepos:!1,awsAccountId:``,awsAuthMethod:``,awsRegion:``,awsRoleName:``,blueprint:``,eveServer:``,externalTemplateRepos:[],netlabServer:``,sharedUsers:[]}),onSuccess:async n=>{b.success(`Workspace created`,{description:`Workspace "${n.name}" has been created successfully.`}),await t.invalidateQueries({queryKey:k.workspaces()}),await e({to:`/dashboard/deployments`,search:{workspace:n.id}})},onError:e=>{b.error(`Failed to create workspace`,{description:e.message})}});function i(e){r.mutate(e)}function a(e){let t=e.target.value;if(n.setValue(`name`,t),!n.getFieldState(`slug`).isDirty){let e=t.toLowerCase().replace(/[^a-z0-9]+/g,`-`).replace(/^-|-$/g,``);n.setValue(`slug`,e)}}return(0,O.jsxs)(`div`,{className:`max-w-2xl mx-auto p-6 space-y-6`,children:[(0,O.jsx)(`div`,{className:`flex items-center justify-between`,children:(0,O.jsx)(`h1`,{className:`text-2xl font-bold tracking-tight`,children:`Create Workspace`})}),(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Workspace Details`}),(0,O.jsx)(F,{children:`Workspaces organize your deployments and resources.`})]}),(0,O.jsx)(I,{children:(0,O.jsx)(Ka,{...n,children:(0,O.jsxs)(`form`,{onSubmit:n.handleSubmit(i),className:`space-y-6`,children:[(0,O.jsx)(Ja,{control:n.control,name:`name`,render:({field:e})=>(0,O.jsxs)(Za,{children:[(0,O.jsx)(Qa,{children:`Name`}),(0,O.jsx)($a,{children:(0,O.jsx)(ma,{placeholder:`My Project`,...e,onChange:t=>{e.onChange(t),a(t)}})}),(0,O.jsx)(eo,{children:`A display name for your workspace.`}),(0,O.jsx)($,{})]})}),(0,O.jsx)(Ja,{control:n.control,name:`slug`,render:({field:e})=>(0,O.jsxs)(Za,{children:[(0,O.jsx)(Qa,{children:`Slug`}),(0,O.jsx)($a,{children:(0,O.jsx)(ma,{placeholder:`my-project`,...e})}),(0,O.jsx)(eo,{children:`Unique identifier used in URLs. Only lowercase letters, numbers, and dashes.`}),(0,O.jsx)($,{})]})}),(0,O.jsx)(Ja,{control:n.control,name:`description`,render:({field:e})=>(0,O.jsxs)(Za,{children:[(0,O.jsx)(Qa,{children:`Description`}),(0,O.jsx)($a,{children:(0,O.jsx)(to,{placeholder:`Describe the purpose of this workspace...`,...e})}),(0,O.jsx)(eo,{children:`Optional description for your team.`}),(0,O.jsx)($,{})]})}),(0,O.jsxs)(`div`,{className:`flex justify-end gap-4`,children:[(0,O.jsx)(j,{type:`button`,variant:`ghost`,onClick:()=>e({to:`/dashboard/deployments`}),children:`Cancel`}),(0,O.jsx)(j,{type:`submit`,disabled:r.isPending,children:r.isPending?`Creating...`:`Create Workspace`})]})]})})})]})]})}function ao(e,t){let n=S(),r=(0,T.useMemo)(()=>`${Pn}/runs/${encodeURIComponent(e)}/events`,[e]);(0,T.useEffect)(()=>{if(!t||!e)return;let i=Oi(r,{output:t=>{try{console.log(`Run event:`,t.data);let r=JSON.parse(t.data);if(!r||!Array.isArray(r.entries))return;n.setQueryData(k.runLogs(e),e=>{let t=(e?.entries??[]).concat(r.entries);return{cursor:Number(r.cursor??e?.cursor??0),entries:t}})}catch{}}});return()=>{i.close()}},[t,n,e,r])}const oo=C(`/dashboard/runs/$runId`)({component:so});function so(){let{runId:e}=oo.useParams();ao(e,!0);let t=S(),n=w({queryKey:k.dashboardSnapshot(),queryFn:async()=>null,initialData:null,retry:!1,staleTime:1/0}),r=(n.data?.runs??[]).find(t=>String(t.id??``)===e),i=w({queryKey:k.runLogs(e),queryFn:async()=>({cursor:0,entries:[]}),retry:!1,staleTime:1/0}),a=Fn(window.location.pathname+window.location.search);return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsx)(M,{variant:`glass`,children:(0,O.jsx)(N,{children:(0,O.jsxs)(`div`,{className:`flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between`,children:[(0,O.jsx)(`div`,{children:(0,O.jsxs)(P,{children:[`Run `,e]})}),(0,O.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,O.jsx)(x,{className:A({variant:`outline`,size:`sm`}),to:`/dashboard/deployments`,children:`Back`}),(0,O.jsx)(j,{variant:`outline`,size:`sm`,onClick:()=>t.setQueryData(k.runLogs(e),{cursor:0,entries:[]}),children:`Clear`})]})]})})}),!n.data&&(0,O.jsx)(M,{className:`border-dashed`,children:(0,O.jsxs)(I,{className:`pt-6 text-center text-muted-foreground`,children:[`Waiting for platform stream…`,(0,O.jsxs)(`div`,{className:`mt-2 text-xs`,children:[`If you are logged out,`,` `,(0,O.jsx)(`a`,{className:`text-primary underline hover:no-underline`,href:a,onClick:e=>{e.preventDefault(),(async()=>{if(!await yr({loginHref:a})){window.location.href=a;return}await t.invalidateQueries({queryKey:k.session()})})()},children:`login`}),`.`]})]})}),(0,O.jsxs)(M,{children:[(0,O.jsx)(N,{children:(0,O.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,O.jsx)(P,{children:`Metadata`}),(0,O.jsxs)(`div`,{className:`text-xs text-muted-foreground`,children:[`Cursor: `,String(i.data?.cursor??0)]})]})}),(0,O.jsx)(I,{children:(0,O.jsxs)(`div`,{className:`grid grid-cols-1 gap-4 md:grid-cols-3`,children:[(0,O.jsx)(co,{label:`Type`,value:String(r?.tpl_alias??``)}),(0,O.jsx)(co,{label:`Status`,value:String(r?.status??``)}),(0,O.jsx)(co,{label:`Workspace`,value:String(r?.workspaceId??``)}),(0,O.jsx)(co,{label:`Created`,value:String(r?.created??``)}),(0,O.jsx)(co,{label:`Started`,value:String(r?.start??``)}),(0,O.jsx)(co,{label:`Finished`,value:String(r?.end??``)})]})})]}),(0,O.jsxs)(M,{children:[(0,O.jsx)(N,{children:(0,O.jsx)(P,{children:`Output`})}),(0,O.jsx)(I,{children:(0,O.jsx)(`div`,{className:`rounded-md border bg-zinc-950 p-4 font-mono text-xs text-zinc-100`,children:(0,O.jsx)(lo,{entries:i.data?.entries??[]})})})]})]})}function co(e){return(0,O.jsxs)(`div`,{className:`space-y-1`,children:[(0,O.jsx)(`div`,{className:`text-[11px] uppercase tracking-wide text-muted-foreground`,children:e.label}),(0,O.jsx)(`div`,{className:`break-all font-medium text-sm`,children:e.value||`—`})]})}function lo(e){let t=(0,T.useRef)(null);return(0,T.useEffect)(()=>{let e=t.current;e&&(e.scrollTop=e.scrollHeight)},[e.entries.length]),e.entries.length===0?(0,O.jsx)(`div`,{className:`text-zinc-500`,children:`Waiting for output…`}):(0,O.jsx)(`div`,{ref:t,className:`max-h-[65vh] overflow-auto whitespace-pre-wrap`,children:e.entries.map((e,t)=>(0,O.jsxs)(`div`,{children:[(0,O.jsx)(`span`,{className:`text-zinc-500 select-none`,children:e.time?`${e.time} `:``}),(0,O.jsx)(`span`,{children:e.output})]},`${e.time}-${t}`))})}var uo=dt,fo=zt,po=Mt,mo=T.forwardRef(({className:e,sideOffset:t=4,...n},r)=>(0,O.jsx)(ot,{ref:r,sideOffset:t,className:D(`z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2`,e),...n}));mo.displayName=ot.displayName;var ho=An({workspace:On().optional().catch(``)});const go=C(`/dashboard/deployments/new`)({validateSearch:e=>ho.parse(e),component:vo});var _o=An({workspaceId:On().min(1,`Workspace is required`),name:On().min(1,`Deployment name is required`).max(100),kind:kn([`netlab-c9s`,`netlab`,`labpp`,`containerlab`,`clabernetes`,`terraform`]),source:kn([`workspace`,`blueprints`,`external`]),templateRepoId:On().optional(),template:On().min(1,`Template is required`),eveServer:On().optional(),netlabServer:On().optional()});function vo(){let e=vn(),t=S(),{workspace:r}=go.useSearch();Va(!0);let i=w({queryKey:k.dashboardSnapshot(),queryFn:async()=>null,initialData:null,retry:!1,staleTime:1/0}),a=w({queryKey:k.workspaces(),queryFn:zn,staleTime:3e4}).data?.workspaces??[],o=tn({resolver:_t(_o),defaultValues:{workspaceId:r||``,name:``,kind:`netlab-c9s`,source:`blueprints`,templateRepoId:``,template:``,eveServer:``,netlabServer:``}}),{watch:s,setValue:c}=o,l=s(`workspaceId`),u=s(`kind`),d=s(`source`),f=s(`templateRepoId`),p=s(`template`),m=i.data?.templatesIndexUpdatedAt??``;(0,T.useEffect)(()=>{!l&&a.length>0&&c(`workspaceId`,a[0].id)},[l,a,c]),(0,T.useEffect)(()=>{c(`name`,`${(p||u).split(`/`).pop()||u}-${new Date().toISOString().replace(/[-:]/g,``).replace(/\..+/,``).slice(0,15)}`)},[p,u,c]);let h=(0,T.useMemo)(()=>a.find(e=>e.id===l)??null,[l,a]),ee=w({queryKey:k.eveServers(),queryFn:Wn,staleTime:3e4}),te=w({queryKey:k.netlabServers(),queryFn:Gn,staleTime:3e4}),g=(0,T.useMemo)(()=>u===`netlab`||u===`netlab-c9s`||u===`labpp`?d===`workspace`?`workspace`:`blueprints`:u===`containerlab`||u===`clabernetes`?d:`workspace`,[u,d]),_=w({queryKey:k.workspaceTemplates(l,u,g,f||void 0,void 0),enabled:!!l,queryFn:async()=>{let e={source:g};switch(g===`external`&&f&&(e.repo=f),u){case`netlab`:case`netlab-c9s`:return Kn(l,e);case`labpp`:return qn(l,e);case`containerlab`:case`clabernetes`:return Jn(l,e);default:return Kn(l,e)}},staleTime:5*6e4,refetchOnWindowFocus:!1});(0,T.useEffect)(()=>{m&&t.invalidateQueries({queryKey:[`workspaceTemplates`]})},[m,t]);let ne=_.data?.templates??[],re=(h?.externalTemplateRepos??[]).filter(e=>!!e&&typeof e.id==`string`&&typeof e.repo==`string`),ie=!!h?.allowExternalTemplateRepos&&re.length>0,ae=Cn({mutationFn:async e=>{let t={template:e.template};if(e.kind===`netlab`||e.kind===`containerlab`){let n=(e.netlabServer||h?.netlabServer||``).trim();if(!n)throw Error(`netlab server is required`);t.netlabServer=n,t.templateSource=g,g===`external`&&e.templateRepoId&&(t.templateRepo=e.templateRepoId),_.data?.dir&&(t.templatesDir=_.data.dir)}if(e.kind===`netlab-c9s`&&(t.templateSource=g,g===`external`&&e.templateRepoId&&(t.templateRepo=e.templateRepoId),_.data?.dir&&(t.templatesDir=_.data.dir)),e.kind===`labpp`){let n=(e.eveServer||h?.eveServer||``).trim();if(!n)throw Error(`EVE server is required`);t.eveServer=n}e.kind===`clabernetes`&&(t.templateSource=g,g===`external`&&e.templateRepoId&&(t.templateRepo=e.templateRepoId),_.data?.dir&&(t.templatesDir=_.data.dir));let n={name:e.name,type:e.kind,config:t};return Yn(e.workspaceId,n)},onSuccess:async(n,r)=>{b.success(`Deployment created successfully`,{description:`${r.name} is now queued for provisioning.`}),await t.invalidateQueries({queryKey:k.dashboardSnapshot()}),await e({to:`/dashboard/deployments`,search:{workspace:r.workspaceId}})},onError:e=>{b.error(`Failed to create deployment`,{description:e.message})}});function oe(e){ae.mutate(e)}let se=ee.data?.servers??[],ce=te.data?.servers??[];return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsx)(M,{variant:`glass`,children:(0,O.jsx)(N,{children:(0,O.jsxs)(`div`,{className:`flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between`,children:[(0,O.jsxs)(`div`,{children:[(0,O.jsx)(P,{children:`Create deployment`}),(0,O.jsx)(F,{children:`Configure and launch a new infrastructure deployment.`})]}),(0,O.jsx)(j,{variant:`outline`,onClick:()=>e({to:`/dashboard/deployments`,search:{workspace:l}}),children:`Cancel`})]})})}),(0,O.jsx)(M,{children:(0,O.jsx)(I,{className:`pt-6`,children:(0,O.jsx)(Ka,{...o,children:(0,O.jsxs)(`form`,{onSubmit:o.handleSubmit(oe),className:`space-y-8`,children:[(0,O.jsxs)(`div`,{className:`grid gap-6 md:grid-cols-2`,children:[(0,O.jsx)(Ja,{control:o.control,name:`workspaceId`,render:({field:e})=>(0,O.jsxs)(Za,{children:[(0,O.jsx)(Qa,{children:`Workspace`}),(0,O.jsxs)(J,{onValueChange:e.onChange,defaultValue:e.value,value:e.value,children:[(0,O.jsx)($a,{children:(0,O.jsx)(X,{children:(0,O.jsx)(Y,{placeholder:`Select workspace`})})}),(0,O.jsx)(Z,{children:a.map(e=>(0,O.jsxs)(Q,{value:e.id,children:[e.name,` (`,e.slug,`)`]},e.id))})]}),(0,O.jsx)($,{})]})}),(0,O.jsx)(Ja,{control:o.control,name:`kind`,render:({field:e})=>(0,O.jsxs)(Za,{children:[(0,O.jsx)(Qa,{children:`Provider`}),(0,O.jsxs)(J,{onValueChange:t=>{e.onChange(t),o.setValue(`template`,``)},defaultValue:e.value,children:[(0,O.jsx)($a,{children:(0,O.jsx)(X,{children:(0,O.jsx)(Y,{placeholder:`Select provider`})})}),(0,O.jsxs)(Z,{children:[(0,O.jsx)(Q,{value:`netlab-c9s`,children:`Netlab`}),(0,O.jsx)(Q,{value:`netlab`,children:`Netlab (BYOS)`}),(0,O.jsx)(Q,{value:`labpp`,children:`LabPP`}),(0,O.jsx)(Q,{value:`containerlab`,children:`Containerlab`}),(0,O.jsx)(Q,{value:`clabernetes`,children:`Clabernetes`})]})]}),(0,O.jsx)($,{})]})}),(0,O.jsx)(Ja,{control:o.control,name:`source`,render:({field:e})=>(0,O.jsxs)(Za,{children:[(0,O.jsxs)(Qa,{className:`flex items-center gap-2`,children:[`Template source`,(0,O.jsx)(uo,{children:(0,O.jsxs)(fo,{children:[(0,O.jsx)(po,{asChild:!0,children:(0,O.jsx)(Qe,{className:`h-4 w-4 text-muted-foreground`})}),(0,O.jsx)(mo,{children:(0,O.jsx)(`p`,{children:`Git repository or URL containing deployment templates`})})]})})]}),(0,O.jsxs)(J,{onValueChange:t=>{e.onChange(t),o.setValue(`templateRepoId`,``),o.setValue(`template`,``)},defaultValue:e.value,children:[(0,O.jsx)($a,{children:(0,O.jsx)(X,{children:(0,O.jsx)(Y,{placeholder:`Select source`})})}),(0,O.jsxs)(Z,{children:[(0,O.jsx)(Q,{value:`workspace`,children:`Workspace repo`}),(0,O.jsx)(Q,{value:`blueprints`,children:`Blueprints`}),(0,O.jsx)(Q,{value:`external`,disabled:!ie||u!==`containerlab`&&u!==`clabernetes`,children:`External repo`})]})]}),!ie&&(u===`containerlab`||u===`clabernetes`)&&(0,O.jsx)(eo,{children:`External repos disabled or not configured for this workspace.`}),(0,O.jsx)($,{})]})}),g===`external`&&(0,O.jsx)(Ja,{control:o.control,name:`templateRepoId`,render:({field:e})=>(0,O.jsxs)(Za,{children:[(0,O.jsx)(Qa,{children:`External repo`}),(0,O.jsxs)(J,{onValueChange:t=>{e.onChange(t),o.setValue(`template`,``)},defaultValue:e.value,children:[(0,O.jsx)($a,{children:(0,O.jsx)(X,{children:(0,O.jsx)(Y,{placeholder:`Select repo…`})})}),(0,O.jsx)(Z,{children:re.map(e=>(0,O.jsxs)(Q,{value:e.id,children:[e.name,` (`,e.repo,`)`]},e.id))})]}),(0,O.jsx)($,{})]})}),(u===`netlab`||u===`containerlab`)&&(0,O.jsx)(Ja,{control:o.control,name:`netlabServer`,render:({field:e})=>(0,O.jsxs)(Za,{children:[(0,O.jsx)(Qa,{children:`Netlab server`}),(0,O.jsxs)(J,{onValueChange:e.onChange,defaultValue:e.value||h?.netlabServer||``,value:e.value||h?.netlabServer||``,children:[(0,O.jsx)($a,{children:(0,O.jsx)(X,{children:(0,O.jsx)(Y,{placeholder:`Select server…`})})}),(0,O.jsx)(Z,{children:ce.map(e=>(0,O.jsxs)(Q,{value:e.name,children:[e.name,` (`,e.sshHost,`)`]},e.name))})]}),te.isLoading&&(0,O.jsx)(eo,{children:`Loading servers…`}),(0,O.jsx)($,{})]})}),u===`labpp`&&(0,O.jsx)(Ja,{control:o.control,name:`eveServer`,render:({field:e})=>(0,O.jsxs)(Za,{children:[(0,O.jsx)(Qa,{children:`EVE server`}),(0,O.jsxs)(J,{onValueChange:e.onChange,defaultValue:e.value||h?.eveServer||``,value:e.value||h?.eveServer||``,children:[(0,O.jsx)($a,{children:(0,O.jsx)(X,{children:(0,O.jsx)(Y,{placeholder:`Select server…`})})}),(0,O.jsx)(Z,{children:se.map(e=>(0,O.jsxs)(Q,{value:e.name,children:[e.name,` (`,e.apiUrl,`)`]},e.name))})]}),ee.isLoading&&(0,O.jsx)(eo,{children:`Loading servers…`}),(0,O.jsx)($,{})]})}),(0,O.jsx)(Ja,{control:o.control,name:`template`,render:({field:e})=>(0,O.jsxs)(Za,{children:[(0,O.jsx)(Qa,{children:`Template`}),(0,O.jsxs)(J,{onValueChange:e.onChange,defaultValue:e.value,disabled:_.isLoading||ne.length===0,children:[(0,O.jsx)($a,{children:(0,O.jsx)(X,{children:(0,O.jsx)(Y,{placeholder:_.isLoading?`Loading…`:ne.length?`Select template…`:`No templates`})})}),(0,O.jsx)(Z,{children:ne.map(e=>(0,O.jsx)(Q,{value:e,children:e},e))})]}),_.isError&&(0,O.jsx)(`div`,{className:`text-xs text-destructive`,children:`Failed to load templates.`}),(0,O.jsx)($,{})]})}),(0,O.jsx)(Ja,{control:o.control,name:`name`,render:({field:e})=>(0,O.jsxs)(Za,{children:[(0,O.jsx)(Qa,{children:`Deployment name`}),(0,O.jsx)($a,{children:(0,O.jsx)(ma,{placeholder:`My Deployment`,...e})}),(0,O.jsx)(eo,{children:`Custom name for this specific deployment instance.`}),(0,O.jsx)($,{})]})})]}),ae.isError&&(0,O.jsx)(`div`,{className:`rounded-md bg-destructive/15 p-3 text-sm text-destructive border border-destructive/20`,children:ae.error?.message||`Create failed.`}),(0,O.jsxs)(`div`,{className:`flex gap-3`,children:[(0,O.jsxs)(j,{type:`submit`,disabled:ae.isPending,children:[ae.isPending&&(0,O.jsx)(n,{className:`mr-2 h-4 w-4 animate-spin`}),ae.isPending?`Creating…`:`Create Deployment`]}),(0,O.jsx)(j,{type:`button`,variant:`secondary`,onClick:()=>e({to:`/dashboard/deployments`,search:{workspace:l}}),disabled:ae.isPending,children:`Back`})]})]})})})})]})}function yo(){return{downloadImage:(0,T.useCallback)((e,t)=>{e&&jn(e,{cacheBust:!0,backgroundColor:`#18181b`}).then(e=>{let n=document.createElement(`a`);n.download=t,n.href=e,n.click()}).catch(e=>{console.error(`Failed to download image`,e)})},[])}}var bo={custom:({data:e})=>{let t=e.icon===`switch`?le:e.icon===`cloud`?nn:e.icon===`client`?It:ze,n=e.status===`running`?`default`:e.status===`stopped`?`secondary`:`destructive`;return(0,O.jsxs)(M,{className:`min-w-[180px] border-2 shadow-md`,children:[(0,O.jsx)(N,{className:`p-3 pb-2`,children:(0,O.jsxs)(`div`,{className:`flex items-center justify-between gap-2`,children:[(0,O.jsx)(`div`,{className:`p-1.5 bg-muted rounded-md`,children:(0,O.jsx)(t,{className:`w-4 h-4`})}),(0,O.jsx)(K,{variant:n,className:`text-[10px] h-5`,children:String(e.status)})]})}),(0,O.jsxs)(I,{className:`p-3 pt-0`,children:[(0,O.jsx)(P,{className:`text-sm font-bold truncate`,children:String(e.label)}),(0,O.jsx)(`div`,{className:`text-xs text-muted-foreground mt-1 truncate font-mono`,children:String(e.ip||`10.0.0.x`)}),(0,O.jsx)(Wt,{type:`target`,position:kt.Top,className:`!bg-muted-foreground`}),(0,O.jsx)(Wt,{type:`source`,position:kt.Bottom,className:`!bg-muted-foreground`})]})]})}},xo=[{id:`1`,position:{x:250,y:0},data:{label:`Internet`,icon:`cloud`,status:`running`,ip:`0.0.0.0/0`},type:`custom`},{id:`2`,position:{x:100,y:150},data:{label:`Leaf-01`,icon:`switch`,status:`running`,ip:`192.168.1.11`},type:`custom`},{id:`3`,position:{x:400,y:150},data:{label:`Leaf-02`,icon:`switch`,status:`running`,ip:`192.168.1.12`},type:`custom`},{id:`4`,position:{x:50,y:300},data:{label:`Server-A`,icon:`server`,status:`running`,ip:`192.168.1.101`},type:`custom`},{id:`5`,position:{x:200,y:300},data:{label:`Server-B`,icon:`server`,status:`stopped`,ip:`192.168.1.102`},type:`custom`},{id:`6`,position:{x:350,y:300},data:{label:`Client-1`,icon:`client`,status:`running`,ip:`192.168.1.201`},type:`custom`}],So=[{id:`e1-2`,source:`1`,target:`2`,animated:!0},{id:`e1-3`,source:`1`,target:`3`,animated:!0},{id:`e2-3`,source:`2`,target:`3`,style:{strokeDasharray:`5,5`}},{id:`e2-4`,source:`2`,target:`4`},{id:`e2-5`,source:`2`,target:`5`},{id:`e3-6`,source:`3`,target:`6`}];function Co(){let[e,t,n]=rt(xo),[r,i,a]=qt(So),o=(0,T.useRef)(null),{downloadImage:s}=yo();return(0,O.jsx)(`div`,{className:`h-[600px] w-full border rounded-xl bg-background/50 overflow-hidden relative`,ref:o,children:(0,O.jsxs)(Lt,{nodes:e,edges:r,onNodesChange:n,onEdgesChange:a,onConnect:(0,T.useCallback)(e=>i(t=>Qt(e,t)),[i]),nodeTypes:bo,fitView:!0,className:`bg-muted/10`,children:[(0,O.jsx)(Ze,{position:`top-right`,children:(0,O.jsxs)(j,{variant:`outline`,size:`sm`,className:`shadow-sm bg-background/80 backdrop-blur`,onClick:()=>o.current&&s(o.current,`topology.png`),children:[(0,O.jsx)(Nt,{className:`mr-2 h-4 w-4`}),`Download PNG`]})}),(0,O.jsx)(Ft,{}),(0,O.jsx)(bt,{zoomable:!0,pannable:!0,className:`bg-background border rounded-lg`}),(0,O.jsx)(Xt,{gap:12,size:1})]})})}const wo=C(`/dashboard/deployments/$deploymentId/`)({component:To});function To(){let{deploymentId:e}=wo.useParams(),t=vn();Va(!0);let[n,r]=(0,T.useState)(!1),i=w({queryKey:k.dashboardSnapshot(),queryFn:async()=>null,initialData:null,retry:!1,staleTime:1/0}),a=(0,T.useMemo)(()=>(i.data?.deployments??[]).find(t=>t.id===e),[i.data?.deployments,e]),o=String(a?.activeTaskId??``);ao(o,!!o);let s=w({queryKey:k.runLogs(o),queryFn:async()=>({cursor:0,entries:[]}),retry:!1,staleTime:1/0,enabled:!!o});if(!i.data&&!a)return(0,O.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,O.jsx)(W,{className:`h-10 w-32`}),(0,O.jsx)(W,{className:`h-10 w-48`})]}),(0,O.jsx)(W,{className:`h-[400px] w-full`})]});if(!a)return(0,O.jsx)(`div`,{className:`p-6`,children:(0,O.jsx)(G,{icon:xe,title:`Deployment not found`,description:`This deployment may have been deleted or you don't have access.`,action:{label:`Back to Deployments`,onClick:()=>t({to:`/dashboard/deployments`})}})});let c=async()=>{try{await pr(a.workspaceId,a.id),b.success(`Deployment starting`,{description:`${a.name} is queued to start.`})}catch(e){b.error(`Failed to start`,{description:e.message})}},l=async()=>{try{await mr(a.workspaceId,a.id),b.success(`Deployment stopping`,{description:`${a.name} is queued to stop.`})}catch(e){b.error(`Failed to stop`,{description:e.message})}},u=async()=>{try{await hr(a.workspaceId,a.id),b.success(`Deployment destroyed`),t({to:`/dashboard/deployments`})}catch(e){b.error(`Failed to destroy`,{description:e.message})}},d=a.activeTaskStatus??a.lastStatus??`unknown`,f=!!a.activeTaskId,p=(0,T.useMemo)(()=>{let e=(i.data?.runs??[]).filter(e=>String(e.workspaceId??``)===a.workspaceId),t=e.filter(e=>String(e.deploymentId??``)===a.id);return t.length>0?t:e},[a.id,a.workspaceId,i.data?.runs]);return(0,O.jsxs)(`div`,{className:`space-y-6 p-6 pb-20`,children:[(0,O.jsxs)(`div`,{className:`flex flex-col gap-4 md:flex-row md:items-center md:justify-between`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,O.jsx)(x,{to:`/dashboard/deployments`,className:A({variant:`outline`,size:`icon`,className:`h-9 w-9`}),children:(0,O.jsx)(wt,{className:`h-4 w-4`})}),(0,O.jsxs)(`div`,{children:[(0,O.jsxs)(`h1`,{className:`text-2xl font-bold tracking-tight flex items-center gap-3`,children:[a.name,(0,O.jsx)(Eo,{status:d})]}),(0,O.jsxs)(`p`,{className:`text-sm text-muted-foreground flex items-center gap-2 mt-1`,children:[(0,O.jsx)(`span`,{className:`font-mono text-xs bg-muted px-1.5 py-0.5 rounded`,children:a.id}),(0,O.jsx)(`span`,{children:`•`}),(0,O.jsx)(`span`,{className:`capitalize`,children:a.type})]})]})]}),(0,O.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,O.jsxs)(j,{variant:`outline`,size:`sm`,onClick:c,disabled:f,children:[(0,O.jsx)(de,{className:`mr-2 h-4 w-4`}),` Start`]}),(0,O.jsxs)(j,{variant:`outline`,size:`sm`,onClick:l,disabled:f,children:[(0,O.jsx)(tt,{className:`mr-2 h-4 w-4`}),` Stop`]}),(0,O.jsxs)(j,{variant:`destructive`,size:`sm`,onClick:()=>r(!0),disabled:f,children:[(0,O.jsx)(Te,{className:`mr-2 h-4 w-4`}),` Destroy`]})]})]}),(0,O.jsxs)(ya,{defaultValue:`topology`,className:`space-y-6`,children:[(0,O.jsxs)(ba,{children:[(0,O.jsxs)(xa,{value:`topology`,className:`gap-2`,children:[(0,O.jsx)(le,{className:`h-4 w-4`}),` Topology`]}),(0,O.jsxs)(xa,{value:`logs`,className:`gap-2`,children:[(0,O.jsx)(_,{className:`h-4 w-4`}),` Logs & Events`]}),(0,O.jsxs)(xa,{value:`config`,className:`gap-2`,children:[(0,O.jsx)(ft,{className:`h-4 w-4`}),` Configuration`]})]}),(0,O.jsx)(Sa,{value:`topology`,className:`space-y-6 animate-in fade-in-50`,children:(0,O.jsxs)(M,{children:[(0,O.jsx)(N,{className:`pb-3`,children:(0,O.jsx)(`div`,{className:`flex items-center justify-between`,children:(0,O.jsxs)(`div`,{children:[(0,O.jsx)(P,{children:`Network Topology`}),(0,O.jsx)(F,{children:`Topology viewer is a placeholder (live topology is provider-dependent).`})]})})}),(0,O.jsx)(I,{children:(0,O.jsx)(Co,{})})]})}),(0,O.jsx)(Sa,{value:`logs`,className:`space-y-6 animate-in fade-in-50`,children:(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Logs & Events`}),(0,O.jsx)(F,{children:`Live task output.`})]}),(0,O.jsxs)(I,{children:[a.activeTaskId?(0,O.jsxs)(`div`,{className:`space-y-4`,children:[(0,O.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,O.jsxs)(`div`,{className:`text-sm font-medium`,children:[`Active run: `,String(a.activeTaskId)]}),(0,O.jsx)(x,{to:`/dashboard/runs/$runId`,params:{runId:String(a.activeTaskId)},className:A({variant:`outline`,size:`sm`}),children:`Open run details`})]}),(0,O.jsx)(`div`,{className:`rounded-md border bg-zinc-950 p-4 font-mono text-xs text-zinc-100`,children:(0,O.jsx)(Do,{entries:s.data?.entries??[]})})]}):(0,O.jsxs)(`div`,{className:`flex flex-col items-center justify-center py-10 text-center text-muted-foreground border-2 border-dashed rounded-lg`,children:[(0,O.jsx)(_,{className:`h-10 w-10 mb-3 opacity-20`}),(0,O.jsx)(`p`,{children:`No active run.`}),(0,O.jsx)(`p`,{className:`text-xs mt-1`,children:`Start/stop/destroy will queue runs that appear here.`})]}),(0,O.jsxs)(`div`,{className:`mt-8 space-y-3`,children:[(0,O.jsx)(`div`,{className:`text-sm font-medium`,children:`Recent runs`}),(0,O.jsx)(`div`,{className:`space-y-2`,children:p.length===0?(0,O.jsx)(`div`,{className:`text-sm text-muted-foreground`,children:`No runs yet.`}):p.slice(0,10).map(e=>{let t=String(e.id??``);return(0,O.jsxs)(`div`,{className:`flex items-center justify-between gap-3 rounded-md border p-3`,children:[(0,O.jsxs)(`div`,{className:`min-w-0`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,O.jsx)(`span`,{className:`font-mono text-xs`,children:t}),(0,O.jsx)(K,{variant:`secondary`,className:`capitalize`,children:String(e.status??``)}),(0,O.jsx)(`span`,{className:`text-xs text-muted-foreground truncate`,children:String(e.tpl_alias??e.type??``)})]}),(0,O.jsx)(`div`,{className:`text-xs text-muted-foreground truncate mt-1`,children:String(e.status_text??e.message??``)})]}),(0,O.jsx)(x,{to:`/dashboard/runs/$runId`,params:{runId:t},className:A({variant:`outline`,size:`sm`}),children:`View`})]},t)})})]})]})]})}),(0,O.jsx)(Sa,{value:`config`,className:`space-y-6 animate-in fade-in-50`,children:(0,O.jsxs)(M,{children:[(0,O.jsxs)(N,{children:[(0,O.jsx)(P,{children:`Configuration`}),(0,O.jsx)(F,{children:`Read-only view of the deployment parameters.`})]}),(0,O.jsx)(I,{children:(0,O.jsx)(`pre`,{className:`bg-muted p-4 rounded-lg overflow-auto font-mono text-xs max-h-[500px]`,children:JSON.stringify(a.config,null,2)})})]})})]}),(0,O.jsx)(na,{open:n,onOpenChange:r,children:(0,O.jsxs)(aa,{children:[(0,O.jsxs)(oa,{children:[(0,O.jsx)(ca,{children:`Destroy deployment?`}),(0,O.jsxs)(la,{children:[`This will permanently delete `,(0,O.jsx)(`strong`,{children:a.name}),` and all associated resources. This action cannot be undone.`]})]}),(0,O.jsxs)(sa,{children:[(0,O.jsx)(da,{children:`Cancel`}),(0,O.jsx)(ua,{onClick:u,className:A({variant:`destructive`}),children:`Destroy Deployment`})]})]})})]})}function Eo({status:e}){let t=`secondary`,n=e.toLowerCase();return[`running`,`active`,`healthy`,`succeeded`,`success`].includes(n)&&(t=`default`),[`failed`,`error`,`stopped`,`crashloopbackoff`].includes(n)&&(t=`destructive`),(0,O.jsx)(K,{variant:t,className:`capitalize`,children:e})}function Do(e){let t=(0,T.useRef)(null);return(0,T.useEffect)(()=>{let e=t.current;e&&(e.scrollTop=e.scrollHeight)},[e.entries.length]),e.entries.length===0?(0,O.jsx)(`div`,{className:`text-zinc-500`,children:`Waiting for output…`}):(0,O.jsx)(`div`,{ref:t,className:`max-h-[65vh] overflow-auto whitespace-pre-wrap`,children:e.entries.map((e,t)=>(0,O.jsxs)(`div`,{children:[(0,O.jsx)(`span`,{className:`text-zinc-500 select-none`,children:e.time?`${e.time} `:``}),(0,O.jsx)(`span`,{children:e.output})]},`${e.time}-${t}`))})}var Oo=Mi.update({id:`/webhooks`,path:`/webhooks`,getParentRoute:()=>L}),ko=Fi.update({id:`/syslog`,path:`/syslog`,getParentRoute:()=>L}),Ao=Gi.update({id:`/status`,path:`/status`,getParentRoute:()=>L}),jo=Ji.update({id:`/snmp`,path:`/snmp`,getParentRoute:()=>L}),Mo=fa.update({id:`/notifications`,path:`/notifications`,getParentRoute:()=>L}),No=Ca.update({id:`/design`,path:`/design`,getParentRoute:()=>L}),Po=Ta.update({id:`/`,path:`/`,getParentRoute:()=>L}),Fo=Da.update({id:`/dashboard/`,path:`/dashboard/`,getParentRoute:()=>L}),Io=ka.update({id:`/admin/`,path:`/admin/`,getParentRoute:()=>L}),Lo=ja.update({id:`/dashboard/s3`,path:`/dashboard/s3`,getParentRoute:()=>L}),Ro=Pa.update({id:`/dashboard/pki`,path:`/dashboard/pki`,getParentRoute:()=>L}),zo=Ia.update({id:`/admin/settings`,path:`/admin/settings`,getParentRoute:()=>L}),Bo=za.update({id:`/admin/governance`,path:`/admin/governance`,getParentRoute:()=>L}),Vo=Ua.update({id:`/dashboard/deployments/`,path:`/dashboard/deployments/`,getParentRoute:()=>L}),Ho=ro.update({id:`/dashboard/workspaces/new`,path:`/dashboard/workspaces/new`,getParentRoute:()=>L}),Uo=oo.update({id:`/dashboard/runs/$runId`,path:`/dashboard/runs/$runId`,getParentRoute:()=>L}),Wo={IndexRoute:Po,DesignRoute:No,NotificationsRoute:Mo,SnmpRoute:jo,StatusRoute:Ao,SyslogRoute:ko,WebhooksRoute:Oo,AdminGovernanceRoute:Bo,AdminSettingsRoute:zo,DashboardPkiRoute:Ro,DashboardS3Route:Lo,AdminIndexRoute:Io,DashboardIndexRoute:Fo,DashboardDeploymentsNewRoute:go.update({id:`/dashboard/deployments/new`,path:`/dashboard/deployments/new`,getParentRoute:()=>L}),DashboardRunsRunIdRoute:Uo,DashboardWorkspacesNewRoute:Ho,DashboardDeploymentsIndexRoute:Vo,DashboardDeploymentsDeploymentIdIndexRoute:wo.update({id:`/dashboard/deployments/$deploymentId/`,path:`/dashboard/deployments/$deploymentId/`,getParentRoute:()=>L})};const Go=Sn({routeTree:L._addFileChildren(Wo)._addFileTypes(),context:{queryClient:void 0}});var Ko=new gn;Mn.createRoot(document.getElementById(`root`)).render((0,O.jsx)(T.StrictMode,{children:(0,O.jsx)(xn,{client:Ko,children:(0,O.jsx)(yn,{router:Go,context:{queryClient:Ko}})})}));