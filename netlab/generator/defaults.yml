---
# Skyforge Netlab defaults
#
# This file is installed into the netlab generator container as:
#   /etc/netlab/defaults.yml
#
# Goals:
# - Prefer Containerlab (clab) as the provider when not explicitly set in a template.
# - Ensure common device types have a clab image configured.
# - Provide common configlets (ex: SNMP) without patching upstream netlab.
#
# NOTE: Netlab syntax matches the topology file, but without the `defaults.` prefix.
provider: clab
plugin: [ files ]

# Apply SNMP config globally so collectors can discover devices out of the box.
# Blueprints can still override by setting `config: []` explicitly if needed.
config: [ snmp_config ]

# Global configlets available to all blueprints.
#
# Configlets are only applied when referenced in a topology via `config: [ ... ]`.
configlets:
  snmp_config:
    linux: |
      # no-op (keep linux hosts SNMP-free by default)
    eos: |
      snmp-server view sfv3 iso included
      snmp-server group sfgroup v3 priv read sfv3
      snmp-server user skyforge sfgroup v3 auth sha256 SfAuth-default priv aes-128 SfPriv-default
    # Netlab device keys that behave like EOS but don't necessarily inherit its configlet.
    # Keep explicit keys to avoid "fallback" behavior.
    ceos: |
      snmp-server view sfv3 iso included
      snmp-server group sfgroup v3 priv read sfv3
      snmp-server user skyforge sfgroup v3 auth sha256 SfAuth-default priv aes-128 SfPriv-default
    ios: |
      snmp-server view sfv3 iso included
      snmp-server group sfgroup v3 priv read sfv3
      snmp-server user skyforge sfgroup v3 auth sha SfAuth-default priv aes 128 SfPriv-default
    iol: |
      snmp-server view sfv3 iso included
      snmp-server group sfgroup v3 priv read sfv3
      snmp-server user skyforge sfgroup v3 auth sha SfAuth-default priv aes 128 SfPriv-default
    ioll2: |
      snmp-server view sfv3 iso included
      snmp-server group sfgroup v3 priv read sfv3
      snmp-server user skyforge sfgroup v3 auth sha SfAuth-default priv aes 128 SfPriv-default
    iosxr: |
      snmp-server view sfv3 iso included
      snmp-server group sfgroup v3 priv read sfv3
      snmp-server user skyforge sfgroup v3 auth sha SfAuth-default priv aes 128 SfPriv-default
    asa: |
      # SNMPv3 auto-config not available for ASA template
    junos: |
      # SNMPv3 auto-config not available for Junos template
    vmx: |
      # SNMPv3 auto-config not available for vMX template
    vsrx: |
      # SNMPv3 auto-config not available for vSRX template
    vjunos-router: |
      # SNMPv3 auto-config not available for vJunos router template
    vjunos-switch: |
      # SNMPv3 auto-config not available for vJunos switch template
    vptx: |
      # SNMPv3 auto-config not available for vPTX template
    nxos: |
      # SNMPv3 auto-config not available for NX-OS template

devices:
  linux:
    clab:
      image: ghcr.io/forwardnetworks/skyforge-linux-host:20260127

  eos:
    clab:
      image: ghcr.io/forwardnetworks/ceos:4.34.2F

  # Cisco IOS-on-Linux (IOL) via vrnetlab
  iol:
    provider: clab
    clab:
      image: ghcr.io/forwardnetworks/vrnetlab/cisco_iol:17.16.01a

  # Cisco IOL L2 via vrnetlab
  ioll2:
    provider: clab
    clab:
      image: ghcr.io/forwardnetworks/vrnetlab/cisco_iol:L2-17.16.01a

  # Cisco Nexus 9000v via vrnetlab
  nxos:
    provider: clab
    clab:
      image: ghcr.io/forwardnetworks/vrnetlab/vr-n9kv:9.3.8

  # Cisco ASAv via vrnetlab
  asav:
    provider: clab
    clab:
      image: ghcr.io/forwardnetworks/vrnetlab/cisco_asav:9-16-4-57

  # Juniper vJunos via vrnetlab
  vjunos-router:
    provider: clab
    clab:
      image: ghcr.io/forwardnetworks/vrnetlab/juniper_vjunos-router:23.4R2-S2.1
  vjunos-switch:
    provider: clab
    clab:
      image: ghcr.io/forwardnetworks/vrnetlab/juniper_vjunos-switch:23.4R2-S2.1

  # Juniper vJunos Evolved (vPTX) via vrnetlab
  vptx:
    provider: clab
    clab:
      image: ghcr.io/forwardnetworks/vrnetlab/juniper_vjunosevolved:25.2R1.8-EVO

  # Juniper vMX (vrnetlab)
  vmx:
    provider: clab
    clab:
      image: ghcr.io/forwardnetworks/vrnetlab/vr-vmx:18.2R1.9

  # Juniper vSRX (vrnetlab)
  vsrx:
    provider: clab
    clab:
      image: ghcr.io/forwardnetworks/vrnetlab/juniper_vsrx:21.3R1.9
